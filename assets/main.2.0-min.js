!function(t,p){var a=a||{};String.prototype.getFileExtension=function(){return this.split(".").pop()},String.prototype.getHash=function(){var t=0,a,e;if(0===this.length)return t;for(a=0;a<this.length;a++)t=(t<<5)-t+(e=this.charCodeAt(a)),t|=0;return t},String.prototype.isValidJSONString=function(){try{JSON.parse(this)}catch(t){return!1}return!0},dataVisualizer=function(a,t){dataContainer=document.querySelector(a);var r={},e,s={width:600,height:400,margin:20,marginOffset:3,duration:100,type:"bar",dataKey:[0,1],dataOneIsNum:!1,xData:0,xAlign:"bottom",xTicks:!1,xLabel:"",xTicksAmount:5,xTicksFormat:"",xMin:null,xMax:null,yData:0,yAlign:"left",yTicks:!1,yLabel:"",yTicksAmount:5,yTickFormat:"",yMin:null,yMax:null,colors:[],colorsData:"",areaKey:"",srcType:"",srcPath:"",srcKey:null};for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);var i=function(t){var a,e;return a=0!=s[t+"Data"]||s.dataOneIsNum?p.scaleLinear().range(r["range_"+t]):p.scaleBand().range(r["range_"+t]).paddingInner(.1).paddingOuter(.1),s.type,a},o=function(t,a){var e="x"==a?"y":"x",r=[];return r="top"==s[e+"Align"]||"left"==s[e+"Align"]?[0,t]:[t,0]},c=function(t,a){var e=s[t+"Data"];if(t=t.toLowerCase(),0!=e||s.dataOneIsNum){var r=[],n,i;return s.hasOwnProperty(t+"Min")?n=s[t+"Min"]:(n=p.min(a,function(t){return t[s.dataKey[e]]}),console.log(s[t+"Min"])),r=[n,i=s.hasOwnProperty(t+"Max")?s[t+"Max"]:p.max(a,function(t){return t[s.dataKey[e]]})]}return a.map(function(t){return t[s.dataKey[e]]})},l=function(e,r){return e=e||[],(r=r.filter(function(t){return""!==t})).forEach(function(t,a){e.hasOwnProperty(r[a])&&(e=e[r[a]])}),e},u=function(t){var a;switch(s[t+"Align"]){case"top":a=p.axisTop(r[t]);break;case"bottom":a=p.axisBottom(r[t]);break;case"left":a=p.axisLeft(r[t]);break;case"right":a=p.axisRight(r[t])}return s.hasOwnProperty(t+"Ticks")&&(s.hasOwnProperty(t+"TicksFormat")&&a.tickFormat(s[t+"TicksFormat"]),s.hasOwnProperty(t+"TicksAmount")&&a.ticks(s[t+"TicksAmount"])),a},d=function(t,a){var e=a.append("g").attr("class","data-visualizer-axis-"+t+" data-visualizer-axis-align-"+s[t+"Align"]),r="";switch(t+" "+s[t+"Align"]){case"x bottom":r="0,"+s.height;break;case"y right":r=s.width+",0";break;default:r="0,0"}return e.attr("transform","translate("+r+")"),e},h=function(t,a){s[t+"Ticks"]&&(r["lab_"+t]=r.labels.append("text").attr("class","data-visualizer-label-"+t).attr("y",function(){return"x"==t?s.height-s.margin:-40}).attr("x",function(){return"x"==t?s.width/2:-s.height/2}).attr("font-size","1em").attr("text-anchor","middle").text(s[t+"Label"]||s.dataKey[s[t+"Data"]]||""),"y"==t&&r["lab_"+t].attr("transform","rotate(-90)"),r["rule_"+t]=d(t,a),r["axis_"+t]=u(t))},f=function(t,a,e){var r=a;switch(e.duration=p.transition().duration(s.duration),s.type){case"bar":e.graphItem="rect";break;case"scatter":e.graphItem="circle"}switch(s.srcKey&&(r=l(a,s.srcKey)),r.forEach(function(t){t.hasOwnProperty(s.dataKey[s.yData])&&(t[s.dataKey[s.yData]]=+t[s.dataKey[s.yData]]),s.dataOneIsNum&&t.hasOwnProperty(s.dataKey[s.xData])&&(t[s.dataKey[s.xData]]=+t[s.dataKey[s.xData]])}),e.canvas=p.select(t).append("div").attr("class","data-visualizer-wrapper"),e.offH=s.margin*s.marginOffset,e.offV=s.margin*(1.5*s.marginOffset),e.outerWidth=s.width+e.offH,e.outerHeight=s.height+e.offV,e.dimensionString="0 0 "+e.outerWidth+" "+e.outerHeight,e.svg=e.canvas.append("svg").attr("id",t+"-svg").attr("class","data-visualizer-svg").attr("viewBox",e.dimensionString).attr("preserveAspectRatio","xMinYMin meet").style("style","enable-background","new "+e.dimensionString).attr("width",e.outerWidth).attr("height",e.outerHeight),e.container=e.svg.append("g"),e.containerTransform=null,s.xAlign+" "+s.yAlign){case"top left":e.containerTransform=e.offH+","+e.offV;break;case"top right":e.containerTransform="0,"+e.offV;break;case"bottom right":e.containerTransform="0,0";break;default:e.containerTransform=e.offH+",0"}e.container.attr("transform","translate("+e.containerTransform+")"),"pie"==s.type||(e.labels=e.container.append("g").attr("class","data-visualizer-labels"),e.rule=e.container.append("g").attr("class","data-visualizer-axis"),e.range_x=o(s.width,"x"),e.range_y=o(s.height,"y"),e._x=i("x"),e.y=i("y"),h("x",e.rule),h("y",e.rule)),g(r,e)},g=function(t,a){a.dom_y=c("y",t),a.y.domain(a.dom_y),s.yTicks&&a.rule_y.transition(a.duration).call(a.axis_y),a.bitches=a.container.selectAll(a.graphItem).data(t,function(t){return t[s.dataKey[s.xData]]}),"bar"==s.type&&(a.bitches.exit().transition(a.duration).attr("height",0).attr("fill-opacity",0).remove(),a.bitches.enter().append(a.graphItem))};switch(s.srcPath.getFileExtension()){case"csv":p.csv(s.srcPath).then(function(t){f(a,t,r)});break;case"tsv":p.tsv(s.srcPath).then(function(t){f(a,t,r)});break;case"json":p.json(s.srcPath).then(function(t){f(a,t,r)});break;default:if(s.srcPath.getHash())if(jsonSelector=dataContainer.querySelector('script[type="application/json"').innerHTML,jsonSelector.isValidJSONString()){var y=JSON.parse(jsonSelector);f(a,y,r)}else console.error("The data source is not a supported format. Please make sure data is linked either as a json,csv, tsv or direct input in the fields")}},a.dataVisualizer=dataVisualizer,t._1p21=a}(window,d3);