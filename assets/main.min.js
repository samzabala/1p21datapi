!function(e,t){"use strict";var n=n||{},r=["x","y"],a=["x","y","color","r"],i=[0,1,"color","area"],o="data-visualizer-",l=15,c=".75em",s=function(e,t){return t?"x"==e?"height":"width":"x"==e?"width":"height"},u=function(e){return"x"==e?"y":"x"};function p(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1}String.prototype.getFileExtension=function(){return this.split(".").pop()},String.prototype.getHash=function(){var e=0,t,n;if(0===this.length)return e;for(t=0;t<this.length;t++)e=(e<<5)-e+(n=this.charCodeAt(t)),e|=0;return e},String.prototype.isValidJSONString=function(){try{JSON.parse(this)}catch(e){return!1}return!0},String.prototype.toCamelCase=function(){var e;return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")};var d=function(e){var t,n,r,a;return e.match(/^rgb/)?(t=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],n=e[2],r=e[3]):(t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,n=e>>8&255,r=255&e),!((a=Math.sqrt(t*t*.299+n*n*.587+r*r*.114))>170)},g=function(n,a){var l=document.querySelector(n);if(p()){var c=document.createElement("div");throw c.className=o+"wrapper fatality",c.innerHTML='Sorry, this graphic needs D3 to render the data but your browser does not support it.<br><br> Newer versions of Chrome, Edge, Firefox and Safari are recommended. <br><br>See <em><a target="_blank" rel="nofollow" href="https://d3-wiki.readthedocs.io/zh_CN/master/Home/#browser-platform-support">the official wiki</a></em> for more information',l.appendChild(c),new Error("D3 not supported")}var g={},f={width:600,height:600,margin:10,marginOffset:2,transition:1500,delay:250,srcType:"",srcPath:"",srcKey:null,type:"bar",nameIsNum:!1,key:{0:0,1:1,color:null,area:null},format0Prepend:"",format0Append:"",format0Parameter:null,format0Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,format1Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,areaMin:10,areaMax:50,areaOpacity:.8,colorPalette:[],colorData:null,colorLegend:!1,xData:0,xAlign:"bottom",xTicks:!1,xLabel:null,xTicksAmount:null,xParameter:null,xMin:null,xMax:null,xGrid:!1,xGridIncrement:1,xPrepend:"",xAppend:"",xDivider:1,yData:1,yAlign:"left",yTicks:!1,yLabel:null,yTicksAmount:null,yParameter:null,yMin:null,yMax:null,yGrid:!1,yGridIncrement:1,yPrepend:"",yAppend:"",yDivider:1,lineStyle:"",lineWeight:1,lineColor:null,linePoints:!1,lineFill:!1,linePointsColor:null,linePointsSize:null,lineFillColor:null,lineFillOpacity:.5,lineDash:[100,0],piLabelStyle:null,piInRadius:0},h=f;for(var y in a)a.hasOwnProperty(y)&&(h[y]=a[y]);var m=function(e){return 0==e||1==e?h.xData==e?"x":"y":e},b=function(e){var t=h.margin*h.marginOffset*2;return"pie"!==h.type&&!1!==h[u(e)+"Ticks"]&&(t+=h.margin*(.25*h.marginOffset),!1!==h[u(e)+"Labels"]&&(t+=h.margin*(.5*h.marginOffset)),"x"==e&&0==h[u(e)+"Data"]&&(t+=h.margin*(1.5*h.marginOffset))),t},_=function(e){return e>10?10*Math.pow(10,e.toString().length-1):1},x=function(e,t,r){var a=t.toString().split(".");function i(e,t){var n=null;return n=t.length?i(e[t[0]],t.slice(1)):1==r?parseFloat(e):e}r=r||!1,a.forEach(function(e,t){""==e&&a.splice(t,1)});var o=i(e,a);return 1==r&&isNaN(o)&&console.warn(n+" data with the key source of `"+t+"` was passed as numeric but is not."),o},v=function(e){var t=[];switch(e){case"color":t=h[e+"Palette"];break;case"area":t=[h.areaMin,h.areaMax];break;case 0:case 1:t="top"==h[u(m(e))+"Align"]||"left"==h[u(m(e))+"Align"]?[0,h[s(m(e))]]:[h[s(m(e))],0]}return t},k=function(e,n){var r=[],a=h.key[e];if(a)switch(e){case"color":var i;r=n.reduce(function(e,t){return e.includes(x(t,a))||e.push(x(t,a)),e},[]);break;case"area":case 0:case 1:var o,l,c,s;if(h.nameIsNum||1==e||"area"==e){if(r=[o=null!==h[m(e)+"Min"]&&"area"!==e?h[m(e)+"Min"]:t.min(n,function(e){return x(e,a,!0)}),l=null!==h[m(e)+"Max"]&&"area"!==e?h[m(e)+"Max"]:t.max(n,function(e){return x(e,a,!0)})],"scatter"==h.type&&0==e)r=[_(o),_(l)]}else r=n.map(function(e){return x(e,a,!1)})}return r},w=function(e,t){var n=0;return"x"==e?"x"==t?n=h[s(t)]/2:"y"==t&&(n=-h[s(t)]/2):"x"==t?n="bottom"==h[t+"Align"]?h[s(t,!0)]+(g.off_y-.125*h.margin):-(g.off_y-1.5*h.margin):"y"==t&&(n="right"==h[t+"Align"]?h[s(t,!0)]+g.off_x:-.125*g.off_x),n},A=function(e,t,n,r){var a=h[e+"Data"],i=h[u(e)+"Align"],o=20;switch(r=r||!1,h.type){case"pie":break;default:o=h.nameIsNum||1==a?r?0:"right"==i||"bottom"==i?h[s(e)]-g["the_"+a](x(t,h.key[a],!0)):g["the_"+a](x(t,h.key[a],!0)):g["the_"+a].bandwidth()}return o},L=function(e,t,n){var r=(n=n||!1)?0:2;return n||("line"==h.type?"line"==h.type&&h.linePointsSize&&(r=h.linePointsSize):"scatter"==h.type&&(r=g.the_area(x(e,h.key.area,!0)))),r},S=function(e,t){var n="middle";return"pie"==h.type||(0==h.yData&&(n="start"),r.forEach(function(e){0==h[u(e)+"Data"]&&"right"==h[u(e)+"Align"]&&(n="end")})),n},T=function(e,t){var n="0em";return"y"==e&&("pie"!==h.type&&!h.xTicks&&!h.yTicks||"pie"==h.type&&!h.colorLegend)&&(n=1==t?".375em":"-1.5em"),n},P=function(e,t,n,r){r=r||!1;var a=h[e+"Data"],i=0,o;if("pie"==h.type){var l="linked"!=h.piLabelStyle&&r,c=(o=0,"linked"==h.piLabelStyle?o=r?1:2.5:0==r&&(o=1),o),p="linked"!=h.piLabelStyle,d=z(F(n),p,"centroid",c,l);i="x"==e?d[0]:d[1]}else{var f=function(){var t=0,a=1;return r||(("bar"!=h.type||"top"!=h[u(e)+"Align"]&&"right"!=h[u(e)+"Align"])&&("bar"===h.type||"bottom"!=h[u(e)+"Align"]&&"right"!=h[u(e)+"Align"])||(a*=-1),0==h[u(e)+"Data"]&&(t="x"==e?15:g.mLength(e,n)/2,g.mLength(e,n)),t*=a),t},y=function(){var i=1,o=0;return r||(("bar"!=h.type||"bottom"!=h[u(e)+"Align"]&&"right"!=h[u(e)+"Align"])&&("bar"===h.type||"top"!=h[u(e)+"Align"]&&"left"!=h[u(e)+"Align"])||(i=-1),("bar"==h.type&&parseFloat(A(e,t,n))<g.mLength(e,n)||"bar"!==h.type&&parseFloat(A(e,t,n))>=h[s(e,!0)]-g.mLength(e,n))&&0!==a&&(o="x"==e&&"line"!==h.type?A(e,t,n):g.mLength(e,n)),o*=i),o};if(r=r||!1,0==a)i=C(e,t,n),"bar"==h.type&&(i+=A(e,t,n)/2);else switch(h[u(e)+"Align"]){case"top":i=r?C(e,t,n):A(e,t,n);break;case"right":case"bottom":i=r||"right"==h[u(e)+"Align"]&&"bar"==h.type?h[s(e)]:h[s(e)]-A(e,t,n);break;case"left":"bar"!==h.type&&(i=A(e,t,n))}i+=f()+y()}return i},C=function(e,t,n,r){var a=h[e+"Data"],i=h[u(e)+"Align"],o=0;return r=r||!1,"pie"!==h.type&&(h.nameIsNum||1==a?"right"==i||"bottom"==i?o=r&&0!==a&&"scatter"!==h.type?h[s(e)]:h[s(e)]-(h[s(e)]-g["the_"+h[e+"Data"]](x(t,h.key[a],!0))):"line"!=h.type&&"scatter"!=h.type||r&&0!==a&&"scatter"!==h.type||(o=g["the_"+h[e+"Data"]](x(t,h.key[a],!0))):(o=g["the_"+h[e+"Data"]](x(t,h.key[a],!1)),"line"!=h.type&&"scatter"!=h.type||h.nameIsNum||(o+=A(e,t,n)/2))),o},D=function(e){if(g.container_legend){var t=0,n="x"==e?g.container_legend.nodes()[0].getBoundingClientRect()[s(e)]:g.legend_height,r=function(){var t=0,r=1;return("pie"==h.type||"pie"!==h.type&&"left"==h[u(e)+"Align"]||"top"==h[u(e)+"Align"])&&(r=-1),"pie"==h.type&&"x"==e||"pie"!==h.type&&"left"==h[u(e)+"Align"]||"top"==h[u(e)+"Align"]?t=n+15:"pie"==h.type&&"y"==e&&(t=.5*n),t*r};return"pie"==h.type&&"x"==e||"pie"!==h.type&&"left"==h[u(e)+"Align"]||"top"==h[u(e)+"Align"]?t=h[s(e)]:"pie"==h.type&&"y"==e&&(t=.5*h[s(e)]),t+r()}},M=function(e,n){var r=e?"area":"line",a=0==h.xData?"x":"y",i=function(){var e="curveLinear";switch(h.lineStyle){case"step":e="curveStepAfter";break;case"curve":e="curveMonotone"+a.toUpperCase()}return e}(),o=t[r]();if("area"==r){var l={name:a,value:u(a)+1,fill:u(a)+0};"right"!=h[u(a)+"Align"]&&"bottom"!=h[u(a)+"Align"]||(l.value=u(a)+0,l.fill=u(a)+1),o[l.name](function(e,t){return C(a,e,t,n)})[l.value](function(e,t){return C(u(a),e,t,n)})[l.fill](function(e,t){return C(u(a),e,t,!0)})}else o.x(function(e,t){return C("x",e,t,n)}).y(function(e,t){return C("y",e,t,n)});return i&&o.curve(t[i]),o(g.data)},z=function(e,n,r,a,i){a=a||1,r=r||"",i=i||!1;var o=(s=0,(n=n||!1)&&(s=g.pi_radius*h.piInRadius),s),l=function(){var e=0;return(!i||i&&a<=1&&0==n)&&(e=g.pi_radius*a),e}(),c=t.arc().outerRadius(l).innerRadius(o),s;return r?c[r](e):c(e)},F=function(e){var n;return t.pie().sort(null).value(function(e,t){return x(e,h.key[1],!0)})(g.data)[e]},N=function(e){var t=0;return t=h.colorLegend&&"x"==e?.375*h[s(e)]:.5*h[s(e)]},O=function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},I=function(e,n,r,a){r=r||function(e,t,n){return e};var i=t[a=a||"interpolate"](e,n);return function(t){var a=i(t);return r(a,e,n)}},E=function(e){var n;switch(e){case"color":n=t.scaleOrdinal().range(g["range_"+e]);break;case"area":case 0:case 1:n=h.nameIsNum||1==e||"area"==e?h.nameIsNum&&0==e?t.scaleSymlog().constant(10).range(g["range_"+e]):t.scaleLinear().range(g["range_"+e]):"line"==h.type||"scatter"==h.type?t.scalePoint().range(g["range_"+e]):t.scaleBand().range(g["range_"+e]).paddingInner(.1).paddingOuter(.1)}return n},G=function(e,n,r){if(h[e+"Ticks"]){var a=r?"grid_":"",i=h[e+"Align"];r=r||!1,h[e+"Label"]&&(g["lab_"+e]=g.container_lab.append("text").attr("class",o+"label-"+e).attr("y",function(){return w("y",e)}).attr("x",function(){return w("x",e)}).attr("font-size","1em").attr("text-anchor","middle").attr("opacity",0).text(h[e+"Label"]),"y"==e&&g["lab_"+e].attr("transform","rotate(-90)"),g["lab_"+e].transition(g.duration).attr("opacity",1)),g["rule_"+a+e]=n.append("g").attr("class",function(){var t=null;return t=r?o+"grid-"+e+" grid-increment-"+h[e+"GridIncrement"]:o+"axis-"+e+" "+o+"axis-align-"+i});var l="";switch(e+" "+i){case"x bottom":l="0,"+h.height;break;case"y right":l=h.width+",0";break;default:l="0,0"}g["rule_"+a+e].attr("transform","translate("+l+")");var c="Axis "+i;if(g["axis_"+a+e]=t[c.toCamelCase()](g["the_"+h[e+"Data"]]),h[e+"Ticks"]){if("scatter"==h.type&&0==h[e+"Data"]){var u=function(){var e=[],t=g.dom_0[0];do{e.push(t),t*=10}while(t<=g.dom_0[1]);return e};g["axis_"+a+e].tickValues(u())}if(h[e+"TicksAmount"]){var p=function(){return r&&h[e+"TicksAmount"]?h[e+"TicksAmount"]*h[e+"GridIncrement"]:h[e+"TicksAmount"]};g["axis_"+a+e].ticks(p())}r?g["axis_"+a+e].tickSize(-h[s(e,!0)]).tickFormat(""):g["axis_"+a+e].tickFormat(function(t,n){return g["format_"+h[e+"Data"]](t)})}}},H=function(r){switch(g.data=null,h.type){case"bar":g.graph_item_element="rect";break;case"pie":g.graph_item_element="path";break;case"line":case"scatter":g.graph_item_element="circle"}if(g.data=h.srcKey?x(r,h.srcKey):r,h.nameIsNum){for(var c=[],s=0;s<g.data.length;s++)g.data[s]&&c.push(g.data[s]);c.sort(function(e,t){return x(e,h.key[0],!0)-x(t,h.key[0],!0)}),g.data=c}a.key.color||(a.key.color=h.key[0],a.colorLegend||(h.colorLegend=!1)),g.legend_size=30,g.off_x=b("x"),g.off_y=b("y"),g.outerWidth=h.width+2*g.off_x,g.outerHeight=h.height+2*g.off_y,g.canvas=t.select(n).append("div").attr("class",o+"wrapper");var u="0 0 "+g.outerWidth+" "+g.outerHeight;g.svg=g.canvas.append("svg").attr("id",n+"-svg").attr("version","1.1").attr("x","0px").attr("y","0px").attr("class",o+"svg "+o+"type-"+h.type+" "+o+(h.colorPalette.length>0||null!==h.linePointsColor||null!==h.lineColor?"has-palette":"no-palette")+("pie"===h.type||h.xTicks||h.yTicks?"":" "+o+"no-ticks")+(h.colorLegend?"":" "+o+"no-legend")+("pie"==h.type&&null!==h.piLabelStyle?" "+o+"label-style-"+h.piLabelStyle:" "+o+"no-label")).attr("viewBox",u).attr("preserveAspectRatio","xMidYMid meet").attr("xml:space","preserve").style("style","enable-background","new "+u).attr("width",g.outerWidth).attr("height",g.outerHeight),g.duration=g.svg.transition().duration(h.transition).ease(t.easeLinear),g.container=g.svg.append("g").attr("class",o+"svg-wrapper");var p=1.5,d=.5,y=g.off_x,_=g.off_y,w;if("pie"!==h.type){switch(h.yAlign+" "+(null==h.xLabel?"empty":"has")){case"left has":y=g.off_x*p;break;case"right has":y=g.off_x*d;break;default:y=g.off_x}switch(h.xAlign+" "+(null==h.yLabel?"empty":"has")){case"top has":_=g.off_y*p;break;case"bottom has":_=g.off_y*d;break;default:_=g.off_y}}g.container.attr("transform","translate("+y+","+_+")"),"pie"==h.type?g.pi_radius=(w=Math.min(.5*h.width,.5*h.height),h.colorLegend?(w-=.25*w,"linked"==h.piLabelStyle&&(w-=.25*w)):"linked"==h.piLabelStyle&&(w-=.25*w),w):(g.container_lab=g.container.append("g").attr("class",o+"label"),g.container_rule=g.container.append("g").attr("class",o+"axis").attr("font-size",".75em"),(h.xGrid||h.yGrid)&&(g.container_grid=g.container.append("g").attr("class",o+"grid")).attr("font-size",".75em")),i.forEach(function(e){switch(g["range_"+e]=v(e),g["dom_"+e]=k(e,g.data),g["the_"+e]=E(e),g["the_"+e]&&g["dom_"+e]&&g["the_"+e].domain(g["dom_"+e]),g["format_"+e]="function"==typeof h[e+"Parameter"]?h[e+"Parameter"]:"string"==typeof h[e+"Parameter"]?function(n){return t.format(h[e+"Parameter"])(n)}:function(t){var n=h["format"+e.toString().toUpperCase()+"Divider"],r=h["format"+e.toString().toUpperCase()+"Prepend"],a=h["format"+e.toString().toUpperCase()+"Append"],i,o;return r+(1==e||h.nameIsNum?t/n:t)+a},e){case 0:case 1:G(m(e),g.container_rule),h[m(e)+"Grid"]&&G(m(e),g.container_grid,!0);case"color":if(h.colorPalette.length)break}}),g.container_graph=g.container.insert("g").attr("class",o+"graph"),"pie"==h.type&&g.container_graph.attr("transform","translate("+N("x")+","+N("y")+")"),h.width==f.width&&h.height==f.height&&g.data.length>9?console.warn(n+" Width and height was not adjusted. graph elements may not fit in the canvas"):h.width<f.width&&h.height<f.height&&console.warn(n+" set canvas width and or height may be too small.\n Tip: The given height and width are not absolute and act more like aspect ratios. svgs are responsive and will shrink along with content."),("line"!=h.type||h.linePoints)&&(g.blob=g.container_graph.selectAll(g.graph_item_element+"."+o+"graph-item graph-item-blob").data(g.data,function(e){return x(e,h.key[0])}),h.xTicks&&h.yTicks&&("pie"!=h.type||h.piLabelStyle&&h.colorLegend)||(g.blob_text=g.container_graph.selectAll("text."+o+"graph-item graph-item-text").data(g.data,function(e){return x(e,h.key[0])}),"pie"==h.type&&"linked"==h.piLabelStyle&&(g.blob_text_link=g.container_graph.selectAll("polyline."+o+"graph-item graph-item-link").data(g.data,function(e){return x(e,h.key[0])})))),g.dv_init=!1,document.addEventListener("scroll",function(t){var n;l.getBoundingClientRect().top<.5*e.innerHeight&&!g.dv_init&&(g.dv_init=!0,setTimeout(function(){R()},h.delay))},!0)},R=function(){console.log(n,"-------------------------------------------------------------------","\n","calculated",g,"\n","data",g.data,"\n","args",h,"\n","\n","x","\n","domain",g["dom_"+h.xData],"\n","range",g["range_"+h.xData],"\n","\n","y","\n","domain",g["dom_"+h.yData],"\n","range",g["range_"+h.yData],"\n","\n","\n","color","\n","domain",g.dom_color,"\n","range",g.range_color,"\n","\n"),"pie"==h.type||(r.forEach(function(e){h[e+"Ticks"]&&(g["rule_"+e].transition(g.duration).call(g["axis_"+e]).attr("font-family","inherit").attr("font-size","inherit"),h[e+"Grid"]&&(g["rule_grid_"+e].transition(g.duration).call(g["axis_grid_"+e]),g["rule_grid_"+e].selectAll(".tick").attr("class",function(t,n){var r="grid";return g["rule_"+e].selectAll(".tick").each(function(e){e==t&&(r+=" tick-aligned")}),r})))}),"line"==h.type&&(h.lineFill&&(g.fill=g.container_graph.append("path").attr("class",o+"fill"+(null!==h.lineFillColor||null!==h.lineColor?" has-color":" no-color")).attr("fill-opacity",h.lineFillOpacity),g.fill.transition(g.duration).attrTween("d",function(){return I(M(!0,!0),M(!0,!1))}),(h.lineFillColor||h.lineColor)&&g.fill.attr("fill",h.lineFillColor||h.lineColor)),g.line=g.container_graph.append("path").attr("class",o+"line"+(null!==h.lineColor?" has-color":" no-color")).attr("fill","none").attr("stroke-width",h.lineWeight).attr("stroke-linejoin","round").attr("stroke-dasharray",h.lineDash).attr("stroke-opacity",1).attr("stroke-dasharray","0,0").transition(g.duration).attrTween("d",function(){return I(M(!1,!0),M(!1,!1))}),h.lineColor&&g.line.attr("stroke",h.lineColor))),("line"!=h.type||h.linePoints)&&(g.blob.exit().remove(),g.enter_blob=g.blob.enter().append(g.graph_item_element).attr("class",function(e){return o+"graph-item graph-item-blob data-name-"+x(e,h.key[0])}),"pie"!==h.type&&g.blob.merge(g.enter_blob).transition(g.duration).attrTween("line"==h.type||"scatter"==h.type?"cx":"x",function(e,t){return I(C("x",e,t,!0),C("x",e,t,!1))}).attrTween("line"==h.type||"scatter"==h.type?"cy":"y",function(e,t){return I(C("y",e,t,!0),C("y",e,t,!1))}),"pie"==h.type?g.blob.merge(g.enter_blob).transition(g.duration).attrTween("d",function(e,t){var n=F(t);return I(n.endAngle,n.startAngle,function(e){return n.startAngle=e,z(n,!0)})}):"line"==h.type||"scatter"==h.type?g.blob.merge(g.enter_blob).transition(g.duration).attrTween("r",function(e,t){return I(L(e,t,!0),L(e,t,!1))}):g.blob.merge(g.enter_blob).transition(g.duration).attrTween("width",function(e,t){return I(A("x",e,t,!0),A("x",e,t,!1))}).attrTween("height",function(e,t){return I(A("y",e,t,!0),A("y",e,t,!1))}),h.colorPalette.length?(g.blob.merge(g.enter_blob).attr("fill",function(e,t){return g.the_color(x(e,h.key.color))}),"scatter"==h.type&&g.blob.merge(g.enter_blob).attr("fill-opacity",h.areaOpacity).attr("stroke",function(e,t){return g.the_color(x(e,h.key.color))})):"line"==h.type&&(h.linePointsColor||h.lineColor)&&g.blob.merge(g.enter_blob).attr("fill",function(){return h.linePointsColor||h.lineColor})),g.blob_text&&(g.blob_text_link&&(g.enter_blob_text_link=g.blob_text_link.enter().append("polyline").attr("class",function(e){return o+"graph-item graph-item-link data-name-"+x(e,h.key[0])}),g.blob_text_link.merge(g.enter_blob_text_link).transition(g.duration).attrTween("stroke-opacity",function(e,t){return I(0,.75)}).attrTween("points",function(e,t){var n=[z(F(t),!0,"centroid",1,!1),z(F(t),!0,"centroid",1,!1)],r=[z(F(t),!0,"centroid",1,!1),z(F(t),!1,"centroid",2.25,!1)];return I(n,r)})),g.enter_blob_text=g.blob_text.enter().append("text"),"pie"==h.type&&"within"==h.piLabelStyle&&h.colorPalette.length>0&&g.enter_blob_text.attr("stroke",function(e){return g.the_color(x(e,h.key.color))}),[0,1].forEach(function(e){("pie"!==h.type&&!h[m(e)+"Ticks"]||"pie"==h.type&&(0==e&&!h.colorLegend||1==e&&null!==h.piLabelStyle))&&(g["blob_text_"+e]=g.enter_blob_text.append("tspan").attr("class",function(t){return"graph-item-text-data-"+e+" data-name-"+x(t,h.key[0])}).attr("dominant-baseline","middle").attr("text-anchor",function(e,t){return S(e,t)}).attr("font-size",function(){var t=null;return("pie"!==h.type&&!h[u(m(e))+"Ticks"]||"pie"==h.type&&!h.colorLegend)&&(t=0==e?".75em":"1.75em"),t}).text(function(t,n){return g["format_"+e](x(t,h.key[e]))}),g["blob_text_"+e].attr("x",T("x",e)).attr("y",T("y",e)))}),g.mLength=function(e,t){var n=0;return length=g.enter_blob_text?g.enter_blob_text.nodes()[t].getBoundingClientRect()[s(e)]:0,n=length+15},g.blob_text.merge(g.enter_blob_text).attr("class",function(e,t){var n=o+"graph-item graph-item-text";return[0,1].forEach(function(r){("bar"==h.type&&1==r&&(parseFloat(A(m(r),e,t,!1))<g.mLength(m(r),t)||h.colorPalette.length>0&&parseFloat(A(m(r),e,t,!1))>=g.mLength(m(r),t)&&!d(g.the_color(x(e,h.key.color))))||"line"==h.type||"scatter"==h.type||"pie"==h.type&&("within"==h.piLabelStyle&&h.colorPalette.length>0&&!d(g.the_color(x(e,h.key.color)))||"linked"==h.piLabelStyle))&&(n+=" dark")}),n}).transition(g.duration).attrTween("transform",function(e,t){var n="pie"==h.type?F(t):e;return I("translate("+P("x",n,t,!0)+","+P("y",n,t,!0)+")","translate("+P("x",n,t,!1)+","+P("y",n,t,!1)+")")}).styleTween("opacity",function(){return I(0,1)})),h.colorLegend&&(g.legend_height=0,g.container_legend=g.container.append("g").attr("class",o+"legend").attr("font-size",".75em"),g.dom_color.forEach(function(e,t){g.legend=g.container_legend.append("g").attr("class",o+"legend-item"),g.legend.append("rect").attr("class","legend-item-blob").attr("width",.66*g.legend_size).attr("height",.66*g.legend_size).attr("fill",g.the_color(e)),g.legend.append("text").attr("class","legend-item-text").text(e).attr("dominant-baseline","middle").attr("x",g.legend_size).attr("y",.375*g.legend_size),g.legend.attr("transform","translate(0, "+t*g.legend_size+")"),g.legend_height+=g.legend_size}),g.container_legend.attr("transform","translate("+D("x")+","+D("y")+")").transition(g.duration).styleTween("opacity",function(){return I(0,1)}))};if("text"==h.srcType||"rows"==h.srcType){var W=l.querySelector('script[type="application/json"]').innerHTML,B;if(W.isValidJSONString())H(JSON.parse(W));else console.error("Data input may not be valid. Please check and update the syntax")}else switch(h.srcPath.getFileExtension()){case"csv":t.csv(h.srcPath,function(e){return e}).then(H);break;case"tsv":t.tsv(h.srcPath,function(e){return e}).then(H);break;default:t.json(h.srcPath,function(e){return e}).then(H)}};n.dataVisualizer=g,e._1p21=n}(window,d3);