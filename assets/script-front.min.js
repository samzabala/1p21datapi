/*!
* 1point21 Data Vizualiser Version 2.0.0
* Render Script
* @license yes
* DO NOT EDIT min.js
* edit its corresponding unminified js file in /src instead
*/
!function(t,e){"use strict";var n=t._1p21||{},r=["x","y"],a=["x","y","color","r"],i=[0,1,"color","area"],o="data-visualizer-",l=".75em",s="Sorry, unable to display data.<br> Please check the console for more details",c=function(t,e){return e?"x"==t?"height":"width":"x"==t?"width":"height"},u=function(t){return"x"==t?"y":"x"},p=function(){var t=navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1};String.prototype.getFileExtension=function(){return this.split(".").pop()},String.prototype.getHash=function(){var t,e=this.split("#"),n;return e[e.length-1]||""},String.prototype.isValidJSONString=function(){try{JSON.parse(this)}catch(t){return!1}return!0},String.prototype.toCamelCase=function(){var t;return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0==e?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")};var d=function(t){var e,n,r,a;return t.match(/^rgb/)?(e=(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],n=t[2],r=t[3]):(e=(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")))>>16,n=t>>8&255,r=255&t),!((a=Math.sqrt(e*e*.299+n*n*.587+r*r*.114))>170)},g=function(n,a){var l=document.querySelector(n);if(p()){var g=document.createElement("div");throw g.className=o+"wrapper fatality",g.innerHTML='Sorry, this graphic needs D3 to render the data but your browser does not support it.<br><br> Newer versions of Chrome, Edge, Firefox and Safari are recommended. <br><br>See <em><a target="_blank" rel="nofollow" href="https://d3-wiki.readthedocs.io/zh_CN/master/Home/#browser-platform-support">the official wiki</a></em> for more information',l.appendChild(g),new Error("D3 not supported")}var f={};f.dv_container=l;var h={width:600,height:600,margin:40,transition:1500,delay:250,fontSize:"16px",title:"",description:"",srcType:"",srcPath:"",srcKey:null,type:"bar",nameIsNum:!1,key:{0:0,1:1,color:null,area:null},format0Prepend:"",format0Append:"",format0Parameter:null,format0Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,format1Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,areaMin:10,areaMax:50,areaOpacity:.8,colorPalette:[],colorData:null,colorLegend:!1,xData:0,xAlign:"bottom",xTicks:!1,xLabel:null,xTicksAmount:null,xParameter:null,xMin:null,xMax:null,xGrid:!1,xGridIncrement:1,xPrepend:"",xAppend:"",xDivider:1,yData:1,yAlign:"left",yTicks:!1,yLabel:null,yTicksAmount:null,yParameter:null,yMin:null,yMax:null,yGrid:!1,yGridIncrement:1,yPrepend:"",yAppend:"",yDivider:1,lineStyle:"",lineWeight:1,lineColor:null,linePoints:!1,lineFill:!1,linePointsColor:null,linePointsSize:null,lineFillColor:null,lineFillInvert:!1,lineFillOpacity:.5,lineDash:[100,0],piLabelStyle:null,piInRadius:0},y=h;for(var m in a)a.hasOwnProperty(m)&&(y[m]=a[m]);var b=function(t){return 0==t||1==t?y.xData==t?"x":"y":t},_=function(t){return t>10?10*Math.pow(10,t.toString().length-1):1},v=function(t,e,r){var a=e.toString().split(".");function i(t,e){var n=null;return n=e.length?i(t[e[0]],e.slice(1)):1==r?parseFloat(t):t}r=r||!1,a.forEach(function(t,e){""==t&&a.splice(e,1)});var o=i(t,a);return 1==r&&isNaN(o)&&console.warn(n+" data with the key source of `"+e+"` was passed as numeric but is not."),o},x=function(t){var e=[];switch(t){case"color":e=y[t+"Palette"];break;case"area":e=[y.areaMin,y.areaMax];break;case 0:case 1:e="top"==y[u(b(t))+"Align"]||"left"==y[u(b(t))+"Align"]?[0,y[c(b(t))]]:[y[c(b(t))],0]}return e},k=function(t,n){var r=[],a=y.key[t];if(a)switch(t){case"color":var i;r=n.reduce(function(t,e){return t.includes(v(e,a))||t.push(v(e,a)),t},[]);break;case"area":case 0:case 1:var o,l,s,c;if(1==y.nameIsNum||1==t||"area"==t){if(r=[o=null!==y[b(t)+"Min"]&&"area"!==t?y[b(t)+"Min"]:e.min(n,function(t){return v(t,a,!0)}),l=null!==y[b(t)+"Max"]&&"area"!==t?y[b(t)+"Max"]:e.max(n,function(t){return v(t,a,!0)})],"scatter"==y.type&&0==t)r=[_(o),_(l)]}else r=n.map(function(t){return v(t,a,!1)})}return r},w=function(t,e){var n=0;return"x"==t?"x"==e?n=y[c(e)]/2:"y"==e&&(n=-y[c(e)]/2):"x"==e?n="bottom"==y[e+"Align"]?y[c(e,!0)]+f.margin.bottom:-f.margin.top:"y"==e&&(n="right"==y[e+"Align"]?y[c(e,!0)]+(f.margin.right+f.text_offset):-(f.margin.left-f.text_offset)),n},A=function(t,e,n,r){var a=y[t+"Data"],i=y[u(t)+"Align"],o=20;switch(r=r||!1,y.type){case"pie":break;default:(o=1==y.nameIsNum||1==a?r?0:"right"==i||"bottom"==i?y[c(t)]-f["the_"+a](v(e,y.key[a],!0)):f["the_"+a](v(e,y.key[a],!0)):f["the_"+a].bandwidth())<0&&(o=0)}return o},L=function(t,e,n){var r=(n=n||!1)?0:2;return n||("line"==y.type?"line"==y.type&&y.linePointsSize&&(r=y.linePointsSize):"scatter"==y.type&&y.key.area&&(r=f.the_area(v(t,y.key.area,!0)))),r},S=function(t,e){var n="middle";return"pie"==y.type||(0==y.yData&&(n="start"),r.forEach(function(t){0==y[u(t)+"Data"]&&"right"==y[u(t)+"Align"]&&(n="end")})),n},P=function(t,e){var n="0em";return("pie"!==y.type||"pie"==y.type&&!y.colorLegend&&null!==y.piLabelStyle)&&"y"==t&&("pie"!==y.type&&!y.xTicks&&!y.yTicks||"pie"==y.type&&!y.colorLegend)&&(n=1==e?".375em":"-1.5em"),n},T=function(t,e,n,r){r=r||!1;var a=y[t+"Data"],i=0,o;if("pie"==y.type){var l="linked"!=y.piLabelStyle&&r,s=(o=0,"linked"==y.piLabelStyle?o=r?1:2.5:0==r&&(o=1),o),p="linked"!=y.piLabelStyle,d=F(I(n),p,"centroid",s,l);i="x"==t?d[0]:d[1]}else{var g=function(){var e=0,a=1;return r&&"scatter"!==y.type||(("bar"!=y.type||"top"!=y[u(t)+"Align"]&&"right"!=y[u(t)+"Align"])&&("bar"===y.type||"bottom"!=y[u(t)+"Align"]&&"right"!=y[u(t)+"Align"])||(a*=-1),0==y[u(t)+"Data"]&&(e="x"==t?f.text_offset:f.mLength(t,n)/2,f.mLength(t,n)),e*=a),e},h=function(){var i=1,o=0;return r&&"scatter"!==y.type||(("bar"!=y.type||"bottom"!=y[u(t)+"Align"]&&"right"!=y[u(t)+"Align"])&&("bar"===y.type||"top"!=y[u(t)+"Align"]&&"left"!=y[u(t)+"Align"])||(i=-1),("bar"==y.type&&parseFloat(A(t,e,n))<f.mLength(t,n)||"bar"!==y.type&&parseFloat(A(t,e,n))>=y[c(t,!0)]-f.mLength(t,n))&&0!==a&&(o="x"==t&&"line"!==y.type?A(t,e,n):f.mLength(t,n)),o*=i),o};if(r=r||!1,0==a)i=C(t,e,n),"bar"==y.type&&(i+=A(t,e,n)/2);else switch(y[u(t)+"Align"]){case"top":i=r&&"scatter"!==y.type?C(t,e,n):A(t,e,n);break;case"right":case"bottom":i=r&&"scatter"!==y.type||"right"==y[u(t)+"Align"]&&"bar"==y.type?y[c(t)]:y[c(t)]-A(t,e,n);break;case"left":"bar"!==y.type&&(i=A(t,e,n))}i+=g()+h()}return i},C=function(t,e,n,r){var a=y[t+"Data"],i=y[u(t)+"Align"],o=0;return r=r||!1,"pie"!==y.type&&(1==y.nameIsNum||1==a?"right"==i||"bottom"==i?o=r&&0!==a&&"scatter"!==y.type?y[c(t)]:y[c(t)]-(y[c(t)]-f["the_"+y[t+"Data"]](v(e,y.key[a],!0))):"line"!=y.type&&"scatter"!=y.type||r&&0!==a&&"scatter"!==y.type||(o=f["the_"+y[t+"Data"]](v(e,y.key[a],!0))):(o=f["the_"+y[t+"Data"]](v(e,y.key[a],!1)),"line"!=y.type&&"scatter"!=y.type||y.nameIsNum||(o+=A(t,e,n)/2))),o},D=function(t){if(f.container_legend){var e=0,n="x"==t?f.container_legend.nodes()[0].getBoundingClientRect()[c(t)]:f.legend_height,r=function(){var e=0,r=1;return("pie"==y.type||"pie"!==y.type&&"left"==y[u(t)+"Align"]||"top"==y[u(t)+"Align"])&&(r=-1),"pie"==y.type&&"x"==t||"pie"!==y.type&&"left"==y[u(t)+"Align"]||"top"==y[u(t)+"Align"]?e=n+f.text_offset:"pie"==y.type&&"y"==t&&(e=.5*n),e*r};return"pie"==y.type&&"x"==t||"pie"!==y.type&&"left"==y[u(t)+"Align"]||"top"==y[u(t)+"Align"]?e=y[c(t)]:"pie"==y.type&&"y"==t&&(e=.5*y[c(t)]),e+r()}},z=function(t,n){var r=t?"area":"line",a=0==y.xData?"x":"y",i=function(){var t="curveLinear";switch(y.lineStyle){case"step":t="curveStepAfter";break;case"curve":t="curveMonotone"+a.toUpperCase()}return t}(),o=e[r](),l;if("area"==r){var s={name:a,value:u(a)+1,fill:u(a)+0},p=(l=0,y.lineFillInvert&&(l="top"==y[a+"Align"]||"left"==y[a+"Align"]?1:-1),l);o[s.name](function(t,e){return C(a,t,e,n)})[s.value](function(t,e){return C(u(a),t,e,n)})[s.fill](function(t,e){return C(u(a),t,e,!0)+p*y[c(a)]})}else o.x(function(t,e){return C("x",t,e,n)}).y(function(t,e){return C("y",t,e,n)});return i&&o.curve(e[i]),o(f.data)},F=function(t,n,r,a,i){a=a||1,r=r||"",i=i||!1;var o=(c=0,(n=n||!1)&&(c=f.pi_radius*y.piInRadius),c),l=function(){var t=0;return(!i||i&&a<=1&&0==n)&&(t=f.pi_radius*a),t}(),s=e.arc().outerRadius(l).innerRadius(o),c;return r?s[r](t):s(t)},I=function(t){var n;return e.pie().sort(null).value(function(t,e){return v(t,y.key[1],!0)})(f.data)[t]},M=function(t){var e=0;return e=y.colorLegend&&"x"==t?.375*y[c(t)]:.5*y[c(t)]},E=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},N=function(t,n,r,a){r=r||function(t,e,n){return t};var i=e[a=a||"interpolate"](t,n);return function(e){var a=i(e);return r(a,t,n)}},O=function(t){var n;switch(t){case"color":n=e.scaleOrdinal().range(f["range_"+t]);break;case"area":case 0:case 1:n=1==y.nameIsNum||1==t||"area"==t?1==y.nameIsNum&&0==t&&"scatter"==y.type?e.scaleSymlog().constant(10).range(f["range_"+t]):e.scaleLinear().range(f["range_"+t]):"line"==y.type||"scatter"==y.type?e.scalePoint().range(f["range_"+t]):e.scaleBand().range(f["range_"+t]).paddingInner(.1).paddingOuter(.1)}return n},G=function(t,e,n){if(y[t+"Ticks"]){n=n||!1;var r=y[t+"Align"],a=n?"grid_":"";y[t+"Label"]&&!n&&(f["lab_"+t]=f.container_lab.append("text").attr("class",o+"label-"+t).attr("y",function(){return w("y",t)}).attr("x",function(){return w("x",t)}).attr("font-size","1em").attr("text-anchor","middle").attr("opacity",0).text(y[t+"Label"]),"y"==t&&f["lab_"+t].attr("transform","rotate(-90)"),f["lab_"+t].transition(f.duration).attr("opacity",1)),f["rule_"+a+t]=e.append("g").attr("class",function(){var e=null;return e=n?o+"grid-"+t+" grid-increment-"+y[t+"GridIncrement"]:o+"axis-"+t+" "+o+"axis-align-"+r});var i="";switch(t+" "+r){case"x bottom":i="0,"+y.height;break;case"y right":i=y.width+",0";break;default:i="0,0"}f["rule_"+a+t].attr("transform","translate("+i+")")}},H=function(t,n){n=n||!1;var r="Axis "+y[t+"Align"],a=e[r.toCamelCase()](f["the_"+y[t+"Data"]]);if(y[t+"Ticks"]){if("scatter"==y.type&&0==y[t+"Data"]&&1==y.nameIsNum){var i=function(){var t=[],e=k(0,f.data)[0];do{t.push(e),e*=10}while(e<=k(1,f.data)[1]);return t};a.tickValues(i())}if(y[t+"TicksAmount"]){var o=function(){return n&&y[t+"TicksAmount"]?y[t+"TicksAmount"]*y[t+"GridIncrement"]:y[t+"TicksAmount"]};a.ticks(o())}n?a.tickSize(-y[c(t,!0)]).tickFormat(""):a.tickFormat(function(e,n){return f["format_"+y[t+"Data"]](e)})}return a},R=function(t,r){throw e.select(n).classed(o+"initialized",!0),e.select(n).append("div").attr("class",o+"wrapper fatality").html(r||s),new Error(t)},W=function(t){f.data=t,console.log(n,"-------------------------------------------------------------------","\n","calculated shit",f,"\n","data",f.data,"\n","args",y,"\n"),i.forEach(function(t){f["dom_"+t]=k(t,f.data),f["the_"+t]&&f["dom_"+t]&&f["the_"+t].domain(f["dom_"+t])}),("line"!=y.type||y.linePoints)&&(f.blob=f.container_graph.selectAll(f.graph_item_element+"."+o+"graph-item graph-item-blob").data(f.data,function(t){return v(t,y.key[0])}),f.blob.exit().transition(f.duration).attr("fill","red").remove(),("pie"===y.type||y.xTicks&&y.yTicks)&&("pie"!=y.type||!y.piLabelStyle&&y.colorLegend)||(f.blob_text=f.container_graph.selectAll("text."+o+"graph-item graph-item-text").data(f.data,function(t){return v(t,y.key[0])}),f.blob_text.exit().transition(f.duration).attr("fill","red").remove(),"pie"==y.type&&"linked"==y.piLabelStyle&&(f.blob_text_link=f.container_graph.selectAll("polyline."+o+"graph-item graph-item-link").data(f.data,function(t){return v(t,y.key[0])}),f.blob_text_link.exit().transition(f.duration).attr("fill","red").remove()))),"pie"!==y.type&&(r.forEach(function(t){y[t+"Ticks"]&&(f["rule_"+t].transition().duration(y.duration).call(H(t)).attr("font-family",null).attr("font-size",null),y[t+"Grid"]&&(f["rule_grid_"+t].transition().duration(y.duration).call(H(t,!0)),f["rule_grid_"+t].selectAll(".tick").attr("class",function(e,n){var r="grid";return f["rule_"+t].selectAll(".tick").each(function(t){t==e&&(r+=" tick-aligned")}),r})))}),"line"==y.type&&(y.lineFill&&(f.fill=f.container_graph.append("path").attr("class",o+"fill"+(null!==y.lineFillColor||null!==y.lineColor?" has-color":" no-color")).attr("fill-opacity",y.lineFillOpacity),f.fill.transition(f.duration).attrTween("d",function(){return N(z(!0,!0),z(!0,!1))}),(y.lineFillColor||y.lineColor)&&f.fill.attr("fill",y.lineFillColor||y.lineColor)),f.line=f.container_graph.append("path").attr("class",o+"line"+(null!==y.lineColor?" has-color":" no-color")).attr("fill","none").attr("stroke-width",y.lineWeight).attr("stroke-linejoin","round").attr("stroke-dasharray",y.lineDash).attr("stroke-opacity",1).attr("stroke-dasharray","0,0").transition(f.duration).attrTween("d",function(){return N(z(!1,!0),z(!1,!1))}),y.lineColor&&f.line.attr("stroke",y.lineColor))),("line"!=y.type||y.linePoints)&&(f.enter_blob=f.blob.enter().append(f.graph_item_element).attr("class",function(t){return o+"graph-item graph-item-blob data-name-"+v(t,y.key[0])}),"pie"!==y.type&&f.blob.merge(f.enter_blob).transition(f.duration).attrTween("line"==y.type||"scatter"==y.type?"cx":"x",function(t,e){return N(C("x",t,e,!0),C("x",t,e,!1))}).attrTween("line"==y.type||"scatter"==y.type?"cy":"y",function(t,e){return N(C("y",t,e,!0),C("y",t,e,!1))}),"pie"==y.type&&f.blob.merge(f.enter_blob).transition(f.duration).attrTween("d",function(t,e){var n=I(e);return N(n.endAngle,n.startAngle,function(t){return n.startAngle=t,F(n,!0)})}),"line"==y.type||"scatter"==y.type?f.blob.merge(f.enter_blob).transition(f.duration).attrTween("r",function(t,e){return N(L(t,e,!0),L(t,e,!1))}):f.blob.merge(f.enter_blob).transition(f.duration).attrTween("width",function(t,e){return N(A("x",t,e,!0),A("x",t,e,!1))}).attrTween("height",function(t,e){return N(A("y",t,e,!0),A("y",t,e,!1))}),y.colorPalette.length?(f.blob.merge(f.enter_blob).attr("fill",function(t,e){return f.the_color(v(t,y.key.color))}),"scatter"==y.type&&f.blob.merge(f.enter_blob).attr("fill-opacity",y.areaOpacity).attr("stroke-width",1).attr("stroke",function(t,e){return f.the_color(v(t,y.key.color))})):"line"==y.type&&(y.linePointsColor||y.lineColor)&&f.blob.merge(f.enter_blob).attr("fill",function(){return y.linePointsColor||y.lineColor})),f.blob_text&&(f.blob_text_link&&(f.enter_blob_text_link=f.blob_text_link.enter().append("polyline").attr("class",function(t){return o+"graph-item graph-item-link data-name-"+v(t,y.key[0])}),f.blob_text_link.merge(f.enter_blob_text_link).transition(f.duration).attrTween("stroke-opacity",function(t,e){return N(0,.75)}).attrTween("points",function(t,e){var n=[F(I(e),!0,"centroid",1,!1),F(I(e),!0,"centroid",1,!1)],r=[F(I(e),!0,"centroid",1,!1),F(I(e),!1,"centroid",2.25,!1)];return N(n,r)})),f.enter_blob_text=f.blob_text.enter().append("text"),"pie"==y.type&&"within"==y.piLabelStyle&&y.colorPalette.length>0&&f.enter_blob_text.attr("stroke",function(t){return f.the_color(v(t,y.key.color))}),[0,1].forEach(function(t){("pie"!==y.type&&!y[b(t)+"Ticks"]||"pie"==y.type&&(0==t&&!y.colorLegend||1==t&&null!==y.piLabelStyle))&&(f["blob_text_"+t]=f.enter_blob_text.append("tspan").attr("class",function(e){return"graph-item-text-data-"+t+" data-name-"+v(e,y.key[0])}).attr("dominant-baseline","middle").attr("text-anchor",function(t,e){return S(t,e)}).attr("font-size",function(){var e=null;return("pie"!==y.type&&!y[u(b(t))+"Ticks"]||"pie"==y.type&&!y.colorLegend&&null!==y.piLabelStyle)&&(e=0==t?".75em":"1.75em"),e}).attr("font-weight",function(){var e=700;return("pie"!==y.type&&!y[u(b(t))+"Ticks"]||"pie"==y.type&&!y.colorLegend&&null!==y.piLabelStyle)&&0!==t&&(e=300),e}).text(function(e,n){return f["format_"+t](v(e,y.key[t]))}),f["blob_text_"+t].attr("x",P("x",t)).attr("y",P("y",t)))}),f.mLength=function(t,e){var n=0;return length=f.enter_blob_text?f.enter_blob_text.nodes()[e].getBoundingClientRect()[c(t)]:0,n=length+f.text_offset},f.blob_text.merge(f.enter_blob_text).attr("class",function(t,e){var n=o+"graph-item graph-item-text";return[0,1].forEach(function(r){("bar"==y.type&&1==r&&(parseFloat(A(b(r),t,e,!1))<f.mLength(b(r),e)||y.colorPalette.length>0&&parseFloat(A(b(r),t,e,!1))>=f.mLength(b(r),e)&&!d(f.the_color(v(t,y.key.color))))||"line"==y.type||"scatter"==y.type||"pie"==y.type&&("within"==y.piLabelStyle&&y.colorPalette.length>0&&!d(f.the_color(v(t,y.key.color)))||"linked"==y.piLabelStyle))&&(n+=" dark")}),n}).transition(f.duration).attrTween("transform",function(t,e){var n="pie"==y.type?I(e):t;return N("translate("+T("x",n,e,!0)+","+T("y",n,e,!0)+")","translate("+T("x",n,e,!1)+","+T("y",n,e,!1)+")")}).styleTween("opacity",function(){return N(0,1)})),y.colorLegend&&(f.legend_height=0,f.container_legend&&f.container_legend.remove(),f.container_legend=f.container.append("g").attr("class",o+"legend").attr("font-size",".75em"),f.dom_color.forEach(function(t,e){f.legend=f.container_legend.append("g").attr("class",o+"legend-item"),f.legend.append("rect").attr("class","legend-item-blob").attr("width",.66*f.legend_size).attr("height",.66*f.legend_size).attr("fill",f.the_color(t)),f.legend.append("text").attr("class","legend-item-text").text(t).attr("dominant-baseline","middle").attr("x",f.legend_size).attr("y",.375*f.legend_size),f.legend.attr("transform","translate(0, "+e*f.legend_size+")"),f.legend_height+=f.legend_size}),f.container_legend.attr("transform","translate("+D("x")+","+D("y")+")").transition(f.duration).styleTween("opacity",function(){return N(0,1)}))},B=function(r){switch(e.select(n).classed(o+"initialized",!0),f.data=null,y.type){case"bar":f.graph_item_element="rect";break;case"pie":f.graph_item_element="path";break;case"line":case"scatter":f.graph_item_element="circle"}if(f.data=y.srcKey?v(r,y.srcKey)?v(r,y.srcKey):void R(n+" provided source key is invalid"):r,f.text_offset=parseFloat(y.fontSize),f.data=f.data.filter(function(t,e){var r=!0;if(i.forEach(function(a){y.key[a]&&null==v(t,y.key[a])&&(r=!1,console.info(n+" datum index `"+e+"` was filtered.\ndatum does not have data for the key `"+y.key[a]+"`, which is set as data for `"+a+"`"))}),r)return t}),f.data.length>0){if(1==y.nameIsNum){for(var s=[],c=0;c<f.data.length;c++)f.data[c]&&s.push(f.data[c]);s.sort(function(t,e){return v(t,y.key[0],!0)-v(e,y.key[0],!0)}),f.data=s}a.key.color||(a.key.color=y.key[0],a.colorLegend||(y.colorLegend=!1)),f.legend_size=30,f.margin={top:y.margin[0]||y.margin,left:y.margin[3]||y.margin[1]||y.margin[0]||y.margin,bottom:y.margin[2]||y.margin[0]||y.margin,right:y.margin[1]||y.margin[0]||y.margin},f.outerWidth=y.width+f.margin.left+f.margin.right,f.outerHeight=y.height+f.margin.top+f.margin.bottom,e.select(n).append("div",":first-child").attr("class",o+"heading"),f.heading_sel=e.select(n).select("div."+o+"heading"),y.title&&(f.heading_title=f.heading_sel.append("span").attr("class",o+"title").text(y.title)),y.description&&(f.heading_description=f.heading_sel.append("span").attr("class",o+"description").text(y.description)),f.heading_sel.style("padding-top",function(){return f.margin.top/y.height*50+"%"}).style("padding-left",function(){return f.margin.left/y.width*100+"%"}).style("padding-right",function(){return f.margin.right/y.width*100+"%"}).transition(f.duration).styleTween("opacity",function(){return N(0,1)}),f.canvas=e.select(n).append("div").attr("class",o+"wrapper").style("position","relative").style("padding-bottom",function(){return f.outerHeight/f.outerWidth*100+"%"}).style("position","relative");var u="0 0 "+f.outerWidth+" "+f.outerHeight;f.dv_init=!1,document.addEventListener("scroll",function(r){var a;l.getBoundingClientRect().top<.5*t.innerHeight&&!f.dv_init&&(f.dv_init=!0,setTimeout(function(){var t;f.svg=f.canvas.append("svg").attr("id",n+"-svg").style("position","absolute").style("top","0").style("left","0").style("bottom","0").style("right","0").style("margin","auto").attr("version","1.1").attr("x","0px").attr("y","0px").attr("class",o+"svg "+o+"type-"+y.type+" "+o+(y.colorPalette.length>0||null!==y.linePointsColor||null!==y.lineColor?"has":"no")+"-palette "+o+("pie"===y.type||y.xTicks||y.yTicks?"has":"no")+"-ticks "+o+(y.colorLegend?"has":"no")+"-legend"+("pie"==y.type&&null!==y.piLabelStyle?" "+o+"pi-label-style-"+y.piLabelStyle:" "+o+"no-label")).attr("viewBox",u).attr("preserveAspectRatio","xMidYMid meet").attr("xml:space","preserve").attr("width",f.outerWidth).attr("height",f.outerHeight),f.duration=f.svg.transition().duration(y.transition).ease(e.easeLinear),f.container=f.svg.append("g").attr("class",o+"svg-wrapper").attr("font-size",y.fontSize).attr("transform","translate("+f.margin.left+","+f.margin.top+")"),"pie"==y.type?f.pi_radius=(t=Math.min(.5*y.width,.5*y.height),y.colorLegend&&(t-=.25*t),"linked"==y.piLabelStyle&&(t-=.25*t),t):(f.container_lab=f.container.append("g").attr("class",o+"label"),f.container_rule=f.container.append("g").attr("class",o+"axis").attr("font-size",".75em"),(y.xGrid||y.yGrid)&&(f.container_grid=f.container.append("g").attr("class",o+"grid").attr("font-size",".75em"))),f.container_graph=f.container.insert("g").attr("class",o+"graph"),y.width==h.width&&y.height==h.height&&f.data.length>9?console.warn(n+" Width and height was not adjusted. graph elements may not fit in the canvas"):y.width<h.width&&y.height<h.height&&console.warn(n+" set canvas width and or height may be too small.\n Tip: The given height and width are not absolute and act more like aspect ratios. svgs are responsive and will shrink along with content."),"pie"==y.type&&f.container_graph.attr("transform","translate("+M("x")+","+M("y")+")"),i.forEach(function(t){switch(f["range_"+t]=x(t),f["the_"+t]=O(t),f["format_"+t]="function"==typeof y["format"+t+"Parameter"]?y["format"+t+"Parameter"]:"string"==typeof y["format"+t+"Parameter"]?function(n){return e.format(y["format"+t+"Parameter"])(n)}:function(e){var n=y["format"+t.toString().toUpperCase()+"Divider"],r=y["format"+t.toString().toUpperCase()+"Prepend"],a=y["format"+t.toString().toUpperCase()+"Append"],i,o;return r+(1==t||1==y.nameIsNum?e/n:e)+a},t){case 0:case 1:G(b(t),f.container_rule),y[b(t)+"Grid"]&&G(b(t),f.container_grid,!0);case"color":if(y.colorPalette.length)break}}),W(f.data)},y.delay),t.addEventListener("resize",function(){setTimeout(W(f.data),100)}))},!0)}else R("Data was filtered and all items are invalid for visualizing. check provided data keys and make sure they are correct")};if(y.srcPath.indexOf(t.location.href)>-1){var U=document.getElementById(y.srcPath.getHash()).innerHTML,q;if(U.isValidJSONString())B(JSON.parse(U));else R("Data input may not be valid. Please check and _ the syntax")}else switch(y.srcPath.getFileExtension()){case"csv":case"dsv":case"tsv":case"xml":e[y.srcPath.getFileExtension()](y.srcPath,function(t){return t}).then(B).catch(function(t){R(t,"Data source couldn't be requested. Please check console for more details")});break;default:e.json(y.srcPath,function(t){return t}).then(B).catch(function(t){R(t,"Data source couldn't be requested. Please check console for more details")})}};n.dataVisualizer=g,t._1p21=n}(window,d3);