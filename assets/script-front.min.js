/*!
* 1point21 Data Vizualiser Version 1.2.0.2
* Render Script
* @license yes
* DO NOT EDIT min.js
* edit its corresponding unminified js file in /src instead
*/
!function(e,t){"use strict";var n=e._1p21||{};n.graphs={},n.dataVisualizer=function(r,a){var i=["x","y"],l=["x","y","color","r"],o=[0,1,"color","area"],s="data-visualizer-",c=".75em",u=function(e,t){return t?"x"==e?"height":"width":"x"==e?"width":"height"},p=function(e){return"x"==e?"y":"x"},d=function(){var e=navigator.userAgent;return e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1};String.prototype.getFileExtension=function(){return this.split(".").pop()},String.prototype.getHash=function(){var e,t=this.split("#"),n;return t[t.length-1]||""},String.prototype.isValidJSONString=function(){try{JSON.parse(this)}catch(e){return!1}return!0},String.prototype.toCamelCase=function(){var e;return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")};var g=function(e){var t,n,r,a;return e.match(/^rgb/)?(t=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],n=e[2],r=e[3]):(t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,n=e>>8&255,r=255&e),!((a=Math.sqrt(t*t*.299+n*n*.587+r*r*.114))>170)},h=document.querySelector(r);if(d()){var f=document.createElement("div");throw f.className=s+"wrapper fatality",f.innerHTML='Sorry, this graphic needs D3 to render the data but your browser does not support it.<br><br> Newer versions of Chrome, Edge, Firefox and Safari are recommended. <br><br>See <em><a target="_blank" rel="nofollow" href="https://d3-wiki.readthedocs.io/zh_CN/master/Home/#browser-platform-support">the official wiki</a></em> for more information',h.appendChild(f),new Error("D3 not supported")}var y={};y.dv_container=h;var m={width:600,height:600,margin:40,transition:1500,delay:250,fontSize:"16px",nameSize:.75,valueSize:1.75,title:"",description:"",srcType:"",srcPath:"",srcKey:null,type:"bar",nameIsNum:!1,key:{0:0,1:1,color:null,area:null},format0Prepend:"",format0Append:"",format0Parameter:null,format0Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,format1Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,areaMin:10,areaMax:50,areaOpacity:.8,colorPalette:[],colorData:null,colorLegend:!1,xData:0,xAlign:"bottom",xTicks:!1,xLabel:null,xTicksAmount:null,xParameter:null,xMin:null,xMax:null,xGrid:!1,xGridIncrement:1,xPrepend:"",xAppend:"",xDivider:1,yData:1,yAlign:"left",yTicks:!1,yLabel:null,yTicksAmount:null,yParameter:null,yMin:null,yMax:null,yGrid:!1,yGridIncrement:1,yPrepend:"",yAppend:"",yDivider:1,lineStyle:"",lineWeight:1,lineColor:null,linePoints:!1,lineFill:!1,linePointsColor:null,linePointsSize:null,lineFillColor:null,lineFillInvert:!1,lineFillOpacity:.5,lineDash:[100,0],piLabelStyle:null,piInRadius:0,srcMultiple:!1,srcReverse:!1,srcReverseMultiple:!1,srcKeyMultiple:null,barDisplayTextOut:!1,colorBackground:"#EEE",colorBy:"key",colorScheme:null,toolTip:!1,toolTipContent:null},_=m;for(var b in a)a.hasOwnProperty(b)&&(_[b]=a[b]);y.has_text=!(("pie"===_.type||"scatter"===_.type||_.xTicks&&_.yTicks)&&("pie"!=_.type||!_.piLabelStyle&&_.colorLegend)),y.has_both_text_on_blob=!(!y.has_text||("pie"===_.type||_.xTicks||_.yTicks)&&("pie"!=_.type||_.colorLegend||null===_.piLabelStyle)),y.text_padding=2.25;var x=function(e){return 0==e||1==e?_.xData==e?"x":"y":e},v=function(e){return e>10?10*Math.pow(10,e.toString().length-1):1},k=function(e,t,n){var a=t.toString().split(".");function i(e,t){var r=null;return r=t.length?i(e[t[0]],t.slice(1)):1==n?parseFloat(e):e}n=n||!1,a.forEach(function(e,t){""==e&&a.splice(t,1)});var l=i(e,a);return 1==n&&isNaN(l)&&console.warn(r+" data with the key source of `"+t+"` was passed as numeric but is not."),l},w=function(e){var t=[];switch(e){case"color":t=_[e+"Palette"];break;case"area":t=[_.areaMin,_.areaMax];break;case 0:case 1:t="top"==_[p(x(e))+"Align"]||"left"==_[p(x(e))+"Align"]?[0,_[u(x(e))]]:[_[u(x(e))],0]}return t},S=function(e,n){var r=[],a=_.key[e];if(a)switch(e){case"color":var i;r=n.reduce(function(e,t){return e.includes(k(t,a))||e.push(k(t,a)),e},[]);break;case"area":case 0:case 1:var l,o,s,c;if(1==_.nameIsNum||1==e||"area"==e){if(r=[l=null!==_[x(e)+"Min"]&&"area"!==e?_[x(e)+"Min"]:t.min(n,function(e){return k(e,a,!0)}),o=null!==_[x(e)+"Max"]&&"area"!==e?_[x(e)+"Max"]:t.max(n,function(e){return k(e,a,!0)})],"scatter"==_.type&&0==e)r=[v(l),v(o)]}else r=n.map(function(e){return k(e,a,!1)})}return r},A=function(e,t){var n=0;return"x"==e?"x"==t?n=_[u(t)]/2:"y"==t&&(n=-_[u(t)]/2):"x"==t?n="bottom"==_[t+"Align"]?_[u(t,!0)]+y.margin.bottom:-y.margin.top:"y"==t&&(n="right"==_[t+"Align"]?_[u(t,!0)]+(y.margin.right+y.text_base_size):-(y.margin.left-y.text_base_size)),n},z=function(e,t,n,r){var a=_[e+"Data"],i=_[p(e)+"Align"],l=20;switch(r=r||!1,_.type){case"pie":break;default:(l=1==_.nameIsNum||1==a?r?0:"right"==i||"bottom"==i?_[u(e)]-y["the_"+a](k(t,_.key[a],!0)):y["the_"+a](k(t,_.key[a],!0)):y["the_"+a].bandwidth())<0&&(l=0)}return l},P=function(e,t,n){var r=(n=n||!1)?0:2;return n||("line"==_.type?"line"==_.type&&_.linePointsSize&&(r=_.linePointsSize):"scatter"==_.type&&_.key.area&&(r=y.the_area(k(e,_.key.area,!0)))),r},T=function(e,t){var n="middle";return"pie"==_.type||(0==_.yData&&(n="start"),i.forEach(function(e){0==_[p(e)+"Data"]&&"right"==_[p(e)+"Align"]&&(n="end")})),n},L=function(e,t){var n="0em";if(y.has_both_text_on_blob&&"y"==e&&y.has_both_text_on_blob){var r=y.text_base_size*(_.nameSize+_.valueSize+y.text_padding);n=1==t?(-.5*r+y.text_base_size*_.valueSize*.5+y.text_base_size)/(y.text_base_size*_.valueSize)+"em":(.5*r-y.text_base_size*_.nameSize*.5-y.text_base_size)/(y.text_base_size*_.nameSize)+"em"}return n},C=function(e,t,n,a){a=a||!1;var i=_[e+"Data"],l=0,o;if("pie"==_.type){var s="linked"!=_.piLabelStyle&&a,c=(o=0,"linked"==_.piLabelStyle?o=a?1:2.5:0==a&&(o=1),o),d="linked"!=_.piLabelStyle,g=F(I(n),d,"centroid",c,s);l="x"==e?g[0]:g[1]}else{var h=function(){var t=0,r=1;return a||"scatter"==_.type||(("bar"!=_.type||"top"!=_[p(e)+"Align"]&&"right"!=_[p(e)+"Align"])&&("bar"===_.type||"bottom"!=_[p(e)+"Align"]&&"right"!=_[p(e)+"Align"])||(r*=-1),0==_[p(e)+"Data"]&&(t="x"==e?y.text_base_size:y.m_length(e,n)/2),t*=r),t},f=function(){var r=1,l=0;return a||"scatter"==_.type||(("bar"!=_.type||"bottom"!=_[p(e)+"Align"]&&"right"!=_[p(e)+"Align"])&&("bar"===_.type||"top"!=_[p(e)+"Align"]&&"left"!=_[p(e)+"Align"])||(r=-1),("bar"==_.type&&parseFloat(z(e,t,n))<y.m_length(e,n)||"bar"!==_.type&&parseFloat(z(e,t,n))>=_[u(e,!0)]-y.m_length(e,n))&&0!==i&&(l="x"==e&&"line"!==_.type?z(e,t,n):y.m_length(e,n)),l*=r),l};if(0==i)l=D(e,t,n),"bar"==_.type&&(l+=z(e,t,n)/2);else switch(_[p(e)+"Align"]){case"top":a||"scatter"===_.type||(l=z(e,t,n));break;case"right":case"bottom":l=a&&"scatter"!==_.type||"right"==_[p(e)+"Align"]&&"bar"==_.type?_[u(e)]:_[u(e)]-z(e,t,n);break;case"left":a||"bar"===_.type||(l=z(e,t,n))}l+=h()+f(),"line"==_.type&&console.log(r,t.shittiness,h(),f(),e+": "+l)}return l},D=function(e,t,n,r){var a=_[e+"Data"],i=_[p(e)+"Align"],l=0;return r=r||!1,"pie"!==_.type&&(1==_.nameIsNum||1==a?"right"==i||"bottom"==i?l=r&&0!==a&&"scatter"!==_.type?_[u(e)]:_[u(e)]-(_[u(e)]-y["the_"+_[e+"Data"]](k(t,_.key[a],!0))):"line"!=_.type&&"scatter"!=_.type||r&&0!==a&&"scatter"!==_.type||(l=y["the_"+_[e+"Data"]](k(t,_.key[a],!0))):(l=y["the_"+_[e+"Data"]](k(t,_.key[a],!1)),"line"!=_.type&&"scatter"!=_.type||_.nameIsNum||(l+=z(e,t,n)/2))),l},M=function(e){if(y.container_legend){var t=0,n="x"==e?y.container_legend.nodes()[0].getBoundingClientRect()[u(e)]:y.legend_height,r=function(){var t=0,r=1;return("pie"==_.type||"pie"!==_.type&&"left"==_[p(e)+"Align"]||"top"==_[p(e)+"Align"])&&(r=-1),"pie"==_.type&&"x"==e||"pie"!==_.type&&"left"==_[p(e)+"Align"]||"top"==_[p(e)+"Align"]?t=n+y.text_base_size:"pie"==_.type&&"y"==e&&(t=.5*n),t*r};return"pie"==_.type&&"x"==e||"pie"!==_.type&&"left"==_[p(e)+"Align"]||"top"==_[p(e)+"Align"]?t=_[u(e)]:"pie"==_.type&&"y"==e&&(t=.5*_[u(e)]),t+r()}},E=function(e,n){var r=e?"area":"line",a=0==_.xData?"x":"y",i=function(){var e="curveLinear";switch(_.lineStyle){case"step":e="curveStepAfter";break;case"curve":e="curveMonotone"+a.toUpperCase()}return e}(),l=t[r](),o;if("area"==r){var s={name:a,value:p(a)+1,fill:p(a)+0},c=(o=0,_.lineFillInvert&&(o="top"==_[a+"Align"]||"left"==_[a+"Align"]?1:-1),o);l[s.name](function(e,t){return D(a,e,t,n)})[s.value](function(e,t){return D(p(a),e,t,n)})[s.fill](function(e,t){return D(p(a),e,t,!0)+c*_[u(a)]})}else l.x(function(e,t){return D("x",e,t,n)}).y(function(e,t){return D("y",e,t,n)});return i&&l.curve(t[i]),l(y.data)},F=function(e,n,r,a,i){a=a||1,r=r||"",i=i||!1;var l=(c=0,(n=n||!1)&&(c=y.pi_radius*_.piInRadius),c),o=function(){var e=0;return(!i||i&&a<=1&&0==n)&&(e=y.pi_radius*a),e}(),s=t.arc().outerRadius(o).innerRadius(l),c;return r?s[r](e):s(e)},I=function(e){var n;return t.pie().sort(null).value(function(e,t){return k(e,_.key[1],!0)})(y.data)[e]},N=function(e){var t=0;return t=_.colorLegend&&"x"==e?.375*_[u(e)]:.5*_[u(e)]},O=function(e){return e.startAngle+(e.endAngle-e.startAngle)/2},G=function(e,n,r,a){r=r||function(e,t,n){return e};var i=t[a=a||"interpolate"](e,n);return function(t){var a=i(t);return r(a,e,n)}},R=function(e){var n;switch(e){case"color":n=t.scaleOrdinal().range(y["range_"+e]);break;case"area":case 0:case 1:n=1==_.nameIsNum||1==e||"area"==e?1==_.nameIsNum&&0==e&&"scatter"==_.type?t.scaleSymlog().constant(10).range(y["range_"+e]):t.scaleLinear().range(y["range_"+e]):"line"==_.type||"scatter"==_.type?t.scalePoint().range(y["range_"+e]):t.scaleBand().range(y["range_"+e]).paddingInner(.1).paddingOuter(.1)}return n},B=function(e,t,n){if(_[e+"Ticks"]){n=n||!1;var r=_[e+"Align"],a=(n?"grid_":"rule_")+e;_[e+"Label"]&&!n&&(y["lab_"+e]=y.container_lab.append("text").attr("class",s+"label-"+e).attr("y",function(){return A("y",e)}).attr("x",function(){return A("x",e)}).attr("font-size","1em").attr("text-anchor","middle").attr("opacity",0).text(_[e+"Label"]),"y"==e&&y["lab_"+e].attr("transform","rotate(-90)"),y["lab_"+e].transition(y.duration).attr("opacity",1)),y[a]=t.append("g").attr("class",function(){var t=null;return t=n?s+"grid-"+e+" grid-increment-"+_[e+"GridIncrement"]:s+"axis-"+e+" "+s+"axis-align-"+r});var i="";switch(e+" "+r){case"x bottom":i="0,"+_.height;break;case"y right":i=_.width+",0";break;default:i="0,0"}y[a].attr("transform","translate("+i+")")}},H=function(e,n){n=n||!1;var r="Axis "+_[e+"Align"],a=t[r.toCamelCase()](y["the_"+_[e+"Data"]]);if(_[e+"Ticks"]){if("scatter"==_.type&&0==_[e+"Data"]&&1==_.nameIsNum){var i=function(){var e=[],t=S(0,y.data)[0];do{e.push(t),t*=10}while(t<=S(1,y.data)[1]);return e};a.tickValues(i())}if(_[e+"TicksAmount"]){var l=function(){return n&&_[e+"TicksAmount"]?_[e+"TicksAmount"]*_[e+"GridIncrement"]:_[e+"TicksAmount"]};a.ticks(l())}n?a.tickSize(-_[u(e,!0)]).tickFormat(""):a.tickFormat(function(t,n){return y["format_"+_[e+"Data"]](t)})}return a},J=function(e,n){throw t.select(r).classed(s+"initialized",!0),t.select(r).append("div").attr("class",s+"wrapper fatality").html(n||"Sorry, unable to display data.<br> Please check the console for more details"),new Error(e)},K=function(e){y.data=e,console.log(r,"-------------------------------------------------------------------","\n","calculated shit",y,"\n","data",y.data,"\n","args",_,"\n"),o.forEach(function(e){y["dom_"+e]=S(e,y.data),y["the_"+e]&&y["dom_"+e]&&y["the_"+e].domain(y["dom_"+e])}),"pie"!==_.type&&i.forEach(function(e){_[e+"Ticks"]&&(y["rule_"+e+"_axis"]=H(e),y["rule_"+e].transition().duration(_.duration).call(y["rule_"+e+"_axis"]).attr("font-family",null).attr("font-size",null),_[e+"Grid"]&&(y["grid_"+e+"_axis"]=H(e,!0),y["grid_"+e].transition().duration(_.duration).call(y["grid_"+e+"_axis"]),y["grid_"+e].selectAll("g").classed("grid",!0).filter(function(t,n){var r=!1;return y["rule_"+e].selectAll("g").each(function(e){e==t&&(r=!0)}),r}).classed("tick-aligned",!0)))}),("line"!=_.type||_.linePoints)&&(y.blob=y.container_graph.selectAll(y.graph_item_element+"."+s+"graph-item.graph-item-blob").data(y.data,function(e){return k(e,_.key[0])}),y.blob.exit().transition(y.duration).attr("fill","red").remove()),y.has_text&&(y.blob_text=y.container_graph.selectAll("text."+s+"graph-item.graph-item-text").data(y.data,function(e){return k(e,_.key[0])}),y.blob_text.exit().transition(y.duration).attr("fill","red").remove(),"pie"==_.type&&"linked"==_.piLabelStyle&&(y.blob_text_link=y.container_graph.selectAll("polyline."+s+"graph-item.graph-item-link").data(y.data,function(e){return k(e,_.key[0])}),y.blob_text_link.exit().transition(y.duration).attr("fill","red").remove())),"pie"!==_.type&&"line"==_.type&&(y.container_graph.select("."+s+"line").remove(),_.lineFill&&(y.container_graph.select("."+s+"fill").remove(),y.fill=y.container_graph.append("path").attr("class",s+"fill"+(null!==_.lineFillColor||null!==_.lineColor?" has-color":" no-color")).attr("fill-opacity",_.lineFillOpacity),y.fill.transition(y.duration).attrTween("d",function(){return G(E(!0,!0),E(!0,!1))}),(_.lineFillColor||_.lineColor)&&y.fill.attr("fill",_.lineFillColor||_.lineColor)),y.line=y.container_graph.append("path").attr("class",s+"line"+(null!==_.lineColor?" has-color":" no-color")).attr("fill","none").attr("stroke-width",_.lineWeight).attr("stroke-linejoin","round").attr("stroke-dasharray",_.lineDash).attr("stroke-opacity",1).attr("stroke-dasharray","0,0").transition(y.duration).attrTween("d",function(){return G(E(!1,!0),E(!1,!1))}),_.lineColor&&y.line.attr("stroke",_.lineColor)),("line"!=_.type||_.linePoints)&&(y.enter_blob=y.blob.enter().append(y.graph_item_element).attr("class",function(e){return s+"graph-item graph-item-blob data-name-"+k(e,_.key[0])}),y.merge_blob=y.blob.merge(y.enter_blob),"pie"!==_.type&&y.merge_blob.transition(y.duration).attrTween("line"==_.type||"scatter"==_.type?"cx":"x",function(e,t){return G(D("x",e,t,!0),D("x",e,t,!1))}).attrTween("line"==_.type||"scatter"==_.type?"cy":"y",function(e,t){return G(D("y",e,t,!0),D("y",e,t,!1))}),"pie"==_.type&&y.merge_blob.transition(y.duration).attrTween("d",function(e,t){var n=I(t);return G(n.endAngle,n.startAngle,function(e){return n.startAngle=e,F(n,!0)})}),"line"==_.type||"scatter"==_.type?y.merge_blob.transition(y.duration).attrTween("r",function(e,t){return G(P(e,t,!0),P(e,t,!1))}):y.merge_blob.transition(y.duration).attrTween("width",function(e,t){return G(z("x",e,t,!0),z("x",e,t,!1))}).attrTween("height",function(e,t){return G(z("y",e,t,!0),z("y",e,t,!1))}),_.colorPalette.length?(y.merge_blob.attr("fill",function(e,t){return y.the_color(k(e,_.key.color))}),"scatter"==_.type&&y.merge_blob.attr("fill-opacity",_.areaOpacity).attr("stroke-width",1).attr("stroke",function(e,t){return y.the_color(k(e,_.key.color))})):"line"==_.type&&(_.linePointsColor||_.lineColor)&&y.merge_blob.attr("fill",function(){return _.linePointsColor||_.lineColor})),y.has_text&&(y.blob_text_link&&(y.enter_blob_text_link=y.blob_text_link.enter().append("polyline").attr("class",function(e){return s+"graph-item graph-item-link data-name-"+k(e,_.key[0])}),y.merge_blob_text_link=y.blob_text_link.merge(y.enter_blob_text_link).transition(y.duration).attrTween("stroke-opacity",function(e,t){return G(0,.75)}).attrTween("points",function(e,t){var n=[F(I(t),!0,"centroid",1,!1),F(I(t),!0,"centroid",1,!1)],r=[F(I(t),!0,"centroid",1,!1),F(I(t),!1,"centroid",2.25,!1)];return G(n,r)})),y.enter_blob_text=y.blob_text.enter().append("text").attr("line-height",1.25).attr("dominant-baseline","middle"),"pie"==_.type&&"within"==_.piLabelStyle&&_.colorPalette.length>0&&y.enter_blob_text.attr("stroke",function(e){return y.the_color(k(e,_.key.color))}),[0,1].forEach(function(e){("pie"!==_.type&&!_[x(e)+"Ticks"]||"pie"==_.type&&(0==e&&!_.colorLegend||1==e&&null!==_.piLabelStyle))&&(y["blob_text_"+e]=y.enter_blob_text.append("tspan").attr("class",function(t){return"graph-item-text-data-"+e+" data-name-"+k(t,_.key[0])}).attr("dominant-baseline","middle").attr("text-anchor",function(e,t){return T(e,t)}).attr("font-size",function(){var t=null;return("pie"!==_.type&&!_[p(x(e))+"Ticks"]||"pie"==_.type&&!_.colorLegend&&null!==_.piLabelStyle)&&(t=0==e?_.nameSize+"em":_.valueSize+"em"),t}).attr("font-weight",function(){var t=700;return("pie"!==_.type&&!_[p(x(e))+"Ticks"]||"pie"==_.type&&!_.colorLegend&&null!==_.piLabelStyle)&&0!==e&&(t=300),t}).text(function(t,n){return y["format_"+e](k(t,_.key[e]))}),y["blob_text_"+e].attr("x",L("x",e)).attr("y",L("y",e)))}),y.m_length=function(e,t){if(y.has_text){var n=y.text_base_size*(_.nameSize+_.valueSize+y.text_padding);return"width"==u(e)&&(n=y.enter_blob_text.nodes()[t].getBoundingClientRect()[u(e)]+y.text_base_size),n}},y.merge_blob_text=y.blob_text.merge(y.enter_blob_text).attr("class",function(e,t){var n=s+"graph-item graph-item-text";return[0,1].forEach(function(r){("bar"==_.type&&1==r&&(parseFloat(z(x(r),e,t,!1))<y.m_length(x(r),t)||_.colorPalette.length>0&&parseFloat(z(x(r),e,t,!1))>=y.m_length(x(r),t)&&!g(y.the_color(k(e,_.key.color))))||"line"==_.type||"scatter"==_.type||"pie"==_.type&&("within"==_.piLabelStyle&&_.colorPalette.length>0&&!g(y.the_color(k(e,_.key.color)))||"linked"==_.piLabelStyle))&&(n+=" dark")}),n}).transition(y.duration).attrTween("transform",function(e,t){var n="pie"==_.type?I(t):e;return G("translate("+C("x",n,t,!0)+","+C("y",n,t,!0)+")","translate("+C("x",n,t,!1)+","+C("y",n,t,!1)+")")}).styleTween("opacity",function(){return G(0,1)})),_.colorLegend&&(y.legend_height=0,y.container_legend&&y.container_legend.remove(),y.container_legend=y.container.append("g").attr("class",s+"legend").attr("font-size",".75em"),y.dom_color.forEach(function(e,t){y.legend=y.container_legend.append("g").attr("class",s+"legend-item"),y.legend.append("rect").attr("class","legend-item-blob").attr("width",.66*y.legend_size).attr("height",.66*y.legend_size).attr("fill",y.the_color(e)),y.legend.append("text").attr("class","legend-item-text").text(e).attr("dominant-baseline","middle").attr("x",y.legend_size).attr("y",.375*y.legend_size),y.legend.attr("transform","translate(0, "+t*y.legend_size+")"),y.legend_height+=y.legend_size}),y.container_legend.attr("transform","translate("+M("x")+","+M("y")+")").transition(y.duration).styleTween("opacity",function(){return G(0,1)})),n.graphs[r]={data:y.data,_:y}},U=function(n){switch(t.select(r).classed(s+"initialized",!0),y.data=null,_.type){case"bar":y.graph_item_element="rect";break;case"pie":y.graph_item_element="path";break;case"line":case"scatter":y.graph_item_element="circle"}if(y.text_base_size=parseFloat(_.fontSize),y.data=_.srcKey?k(n,_.srcKey)?k(n,_.srcKey):void J(r+" provided source key is invalid"):n,y.data=y.data.filter(function(e,t){var n=!0;if(o.forEach(function(a){_.key[a]&&null==k(e,_.key[a])&&(n=!1,console.info(r+" datum index `"+t+"` was filtered.\ndatum does not have data for the key `"+_.key[a]+"`, which is set as data for `"+a+"`"))}),n)return e}),y.data.length>0){if(1==_.nameIsNum){for(var i=[],l=0;l<y.data.length;l++)y.data[l]&&i.push(y.data[l]);i.sort(function(e,t){return k(e,_.key[0],!0)-k(t,_.key[0],!0)}),y.data=i}a.key.color||(a.key.color=_.key[0],a.colorLegend||(_.colorLegend=!1)),y.legend_size=30,y.margin={top:_.margin[0]||_.margin,left:_.margin[3]||_.margin[1]||_.margin[0]||_.margin,bottom:_.margin[2]||_.margin[0]||_.margin,right:_.margin[1]||_.margin[0]||_.margin},y.outer_width=_.width+y.margin.left+y.margin.right,y.outer_height=_.height+y.margin.top+y.margin.bottom,t.select(r).append("div",":first-child").attr("class",s+"heading"),y.heading_sel=t.select(r).select("div."+s+"heading"),_.title&&(y.heading_title=y.heading_sel.append("span").attr("class",s+"title").text(_.title)),_.description&&(y.heading_description=y.heading_sel.append("span").attr("class",s+"description").text(_.description)),y.heading_sel.style("padding-top",function(){return y.margin.top/_.height*50+"%"}).style("padding-left",function(){return y.margin.left/y.outer_width*100+"%"}).style("padding-right",function(){return y.margin.right/y.outer_width*100+"%"}).transition(y.duration).styleTween("opacity",function(){return G(0,1)}),y.canvas=t.select(r).append("div").attr("class",s+"wrapper").style("position","relative").style("padding-bottom",function(){return y.outer_height/y.outer_width*100+"%"}).style("position","relative");var c="0 0 "+y.outer_width+" "+y.outer_height;y.dv_init=!1,document.addEventListener("scroll",function(n){var a;h.getBoundingClientRect().top<.5*e.innerHeight&&!y.dv_init&&(y.dv_init=!0,setTimeout(function(){var n;y.svg=y.canvas.append("svg").attr("id",r+"-svg").style("position","absolute").style("top","0").style("left","0").style("bottom","0").style("right","0").style("margin","auto").attr("version","1.1").attr("x","0px").attr("y","0px").attr("class",s+"svg "+s+"type-"+_.type+" "+s+(_.colorPalette.length>0||null!==_.linePointsColor||null!==_.lineColor?"has":"no")+"-palette "+s+("pie"===_.type||_.xTicks||_.yTicks?"has":"no")+"-ticks "+s+(_.colorLegend?"has":"no")+"-legend"+("pie"==_.type&&null!==_.piLabelStyle?" "+s+"pi-label-style-"+_.piLabelStyle:" "+s+"no-label")).attr("viewBox",c).attr("preserveAspectRatio","xMidYMid meet").attr("xml:space","preserve").attr("width",y.outer_width).attr("height",y.outer_height),y.duration=y.svg.transition().duration(_.transition).ease(t.easeLinear),y.container=y.svg.append("g").attr("class",s+"svg-wrapper").attr("font-size",_.fontSize).style("line-height",1).attr("transform","translate("+y.margin.left+","+y.margin.top+")"),"pie"==_.type?y.pi_radius=(n=Math.min(.5*_.width,.5*_.height),_.colorLegend&&(n-=.25*n),"linked"==_.piLabelStyle&&(n-=.25*n),n):(y.container_lab=y.container.append("g").attr("class",s+"label"),y.container_rule=y.container.append("g").attr("class",s+"axis").attr("font-size",".75em"),(_.xGrid||_.yGrid)&&(y.container_grid=y.container.append("g").attr("class",s+"grid").attr("font-size",".75em"))),y.container_graph=y.container.insert("g").attr("class",s+"graph"),_.width==m.width&&_.height==m.height&&y.data.length>9?console.warn(r+" Width and height was not adjusted. graph elements may not fit in the canvas"):_.width<m.width&&_.height<m.height&&console.warn(r+" set canvas width and or height may be too small.\n Tip: The given height and width are not absolute and act more like aspect ratios. svgs are responsive and will shrink along with content."),JSON.stringify(_.margin)==JSON.stringify(m.margin)&&(_.xLabel||_.yLabel)&&(_.xTicks||_.yTicks)&&console.warn(r+" text overlap is imminent. margins may need to be modified"),"pie"==_.type&&y.container_graph.attr("transform","translate("+N("x")+","+N("y")+")"),o.forEach(function(e){switch(y["range_"+e]=w(e),y["the_"+e]=R(e),y["format_"+e]="function"==typeof _["format"+e+"Parameter"]?_["format"+e+"Parameter"]:"string"==typeof _["format"+e+"Parameter"]?function(n){return t.format(_["format"+e+"Parameter"])(n)}:function(t){var n=_["format"+e.toString().toUpperCase()+"Divider"],r=_["format"+e.toString().toUpperCase()+"Prepend"],a=_["format"+e.toString().toUpperCase()+"Append"],i,l;return r+(1==e||1==_.nameIsNum?t/n:t)+a},e){case 0:case 1:B(x(e),y.container_rule),_[x(e)+"Grid"]&&B(x(e),y.container_grid,!0);case"color":if(_.colorPalette.length)break}}),console,K(y.data),e.addEventListener("resize",function(){K(y.data)})},_.delay))},!0)}else J("Data was filtered and all items are invalid for visualizing. check provided data keys and make sure they are correct")};if(_.srcPath.indexOf(e.location.href)>-1){var q=document.getElementById(_.srcPath.getHash()).innerHTML,V;if(q.isValidJSONString())U(JSON.parse(q));else J("Data input may not be valid. Please check and _ the syntax")}else switch(_.srcPath.getFileExtension()){case"csv":case"dsv":case"tsv":case"xml":t[_.srcPath.getFileExtension()](_.srcPath,function(e){return e}).then(U).catch(function(e){J(e,"Data source couldn't be requested. Please check console for more details")});break;default:t.json(_.srcPath,function(e){return e}).then(U).catch(function(e){J(e,"Data source couldn't be requested. Please check console for more details")})}},e._1p21=n}(window,d3);