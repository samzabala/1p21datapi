/*!
* 1point21 Data Vizualiser Version 2.0.0
* Render Script
* @license yes
* DO NOT EDIT min.js
* edit its corresponding unminified js file in /src instead
*/
!function(t,e){"use strict";var n=t._1p21||{};n.graphs={},n.dataVisualizer=function(r,a){var i=["x","y"],o=["x","y","color","r"],l=[0,1,"color","area"],s="data-visualizer-",c=".75em",u="Sorry, unable to display data.<br> Please check the console for more details",p=function(t,e){return e?"x"==t?"height":"width":"x"==t?"width":"height"},d=function(t){return"x"==t?"y":"x"},g=function(){var t=navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1};String.prototype.getFileExtension=function(){return this.split(".").pop()},String.prototype.getHash=function(){var t,e=this.split("#"),n;return e[e.length-1]||""},String.prototype.isValidJSONString=function(){try{JSON.parse(this)}catch(t){return!1}return!0},String.prototype.toCamelCase=function(){var t;return this.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0==e?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")};var f=function(t){var e,n,r,a;return t.match(/^rgb/)?(e=(t=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],n=t[2],r=t[3]):(e=(t=+("0x"+t.slice(1).replace(t.length<5&&/./g,"$&$&")))>>16,n=t>>8&255,r=255&t),!((a=Math.sqrt(e*e*.299+n*n*.587+r*r*.114))>170)},h=document.querySelector(r);if(g()){var y=document.createElement("div");throw y.className=s+"wrapper fatality",y.innerHTML='Sorry, this graphic needs D3 to render the data but your browser does not support it.<br><br> Newer versions of Chrome, Edge, Firefox and Safari are recommended. <br><br>See <em><a target="_blank" rel="nofollow" href="https://d3-wiki.readthedocs.io/zh_CN/master/Home/#browser-platform-support">the official wiki</a></em> for more information',h.appendChild(y),new Error("D3 not supported")}var m={};m.dv_container=h;var b={width:600,height:600,margin:40,transition:1500,delay:250,fontSize:"16px",title:"",description:"",srcType:"",srcPath:"",srcKey:null,type:"bar",nameIsNum:!1,key:{0:0,1:1,color:null,area:null},format0Prepend:"",format0Append:"",format0Parameter:null,format0Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,format1Divider:1,format1Prepend:"",format1Append:"",format1Parameter:null,areaMin:10,areaMax:50,areaOpacity:.8,colorPalette:[],colorData:null,colorLegend:!1,xData:0,xAlign:"bottom",xTicks:!1,xLabel:null,xTicksAmount:null,xParameter:null,xMin:null,xMax:null,xGrid:!1,xGridIncrement:1,xPrepend:"",xAppend:"",xDivider:1,yData:1,yAlign:"left",yTicks:!1,yLabel:null,yTicksAmount:null,yParameter:null,yMin:null,yMax:null,yGrid:!1,yGridIncrement:1,yPrepend:"",yAppend:"",yDivider:1,lineStyle:"",lineWeight:1,lineColor:null,linePoints:!1,lineFill:!1,linePointsColor:null,linePointsSize:null,lineFillColor:null,lineFillInvert:!1,lineFillOpacity:.5,lineDash:[100,0],piLabelStyle:null,piInRadius:0},_=b;for(var x in a)a.hasOwnProperty(x)&&(_[x]=a[x]);var v=function(t){return 0==t||1==t?_.xData==t?"x":"y":t},k=function(t){return t>10?10*Math.pow(10,t.toString().length-1):1},w=function(t,e,n){var a=e.toString().split(".");function i(t,e){var r=null;return r=e.length?i(t[e[0]],e.slice(1)):1==n?parseFloat(t):t}n=n||!1,a.forEach(function(t,e){""==t&&a.splice(e,1)});var o=i(t,a);return 1==n&&isNaN(o)&&console.warn(r+" data with the key source of `"+e+"` was passed as numeric but is not."),o},A=function(t){var e=[];switch(t){case"color":e=_[t+"Palette"];break;case"area":e=[_.areaMin,_.areaMax];break;case 0:case 1:e="top"==_[d(v(t))+"Align"]||"left"==_[d(v(t))+"Align"]?[0,_[p(v(t))]]:[_[p(v(t))],0]}return e},L=function(t,n){var r=[],a=_.key[t];if(a)switch(t){case"color":var i;r=n.reduce(function(t,e){return t.includes(w(e,a))||t.push(w(e,a)),t},[]);break;case"area":case 0:case 1:var o,l,s,c;if(1==_.nameIsNum||1==t||"area"==t){if(r=[o=null!==_[v(t)+"Min"]&&"area"!==t?_[v(t)+"Min"]:e.min(n,function(t){return w(t,a,!0)}),l=null!==_[v(t)+"Max"]&&"area"!==t?_[v(t)+"Max"]:e.max(n,function(t){return w(t,a,!0)})],"scatter"==_.type&&0==t)r=[k(o),k(l)]}else r=n.map(function(t){return w(t,a,!1)})}return r},S=function(t,e){var n=0;return"x"==t?"x"==e?n=_[p(e)]/2:"y"==e&&(n=-_[p(e)]/2):"x"==e?n="bottom"==_[e+"Align"]?_[p(e,!0)]+m.margin.bottom:-m.margin.top:"y"==e&&(n="right"==_[e+"Align"]?_[p(e,!0)]+(m.margin.right+m.text_offset):-(m.margin.left-m.text_offset)),n},P=function(t,e,n,r){var a=_[t+"Data"],i=_[d(t)+"Align"],o=20;switch(r=r||!1,_.type){case"pie":break;default:(o=1==_.nameIsNum||1==a?r?0:"right"==i||"bottom"==i?_[p(t)]-m["the_"+a](w(e,_.key[a],!0)):m["the_"+a](w(e,_.key[a],!0)):m["the_"+a].bandwidth())<0&&(o=0)}return o},T=function(t,e,n){var r=(n=n||!1)?0:2;return n||("line"==_.type?"line"==_.type&&_.linePointsSize&&(r=_.linePointsSize):"scatter"==_.type&&_.key.area&&(r=m.the_area(w(t,_.key.area,!0)))),r},C=function(t,e){var n="middle";return"pie"==_.type||(0==_.yData&&(n="start"),i.forEach(function(t){0==_[d(t)+"Data"]&&"right"==_[d(t)+"Align"]&&(n="end")})),n},D=function(t,e){var n="0em";return("pie"!==_.type||"pie"==_.type&&!_.colorLegend&&null!==_.piLabelStyle)&&"y"==t&&("pie"!==_.type&&!_.xTicks&&!_.yTicks||"pie"==_.type&&!_.colorLegend)&&(n=1==e?".375em":"-1.5em"),n},z=function(t,e,n,r){r=r||!1;var a=_[t+"Data"],i=0,o;if("pie"==_.type){var l="linked"!=_.piLabelStyle&&r,s=(o=0,"linked"==_.piLabelStyle?o=r?1:2.5:0==r&&(o=1),o),c="linked"!=_.piLabelStyle,u=E(N(n),c,"centroid",s,l);i="x"==t?u[0]:u[1]}else{var g=function(){var e=0,a=1;return r&&"scatter"!==_.type||(("bar"!=_.type||"top"!=_[d(t)+"Align"]&&"right"!=_[d(t)+"Align"])&&("bar"===_.type||"bottom"!=_[d(t)+"Align"]&&"right"!=_[d(t)+"Align"])||(a*=-1),0==_[d(t)+"Data"]&&(e="x"==t?m.text_offset:m.mLength(t,n)/2,m.mLength(t,n)),e*=a),e},f=function(){var i=1,o=0;return r&&"scatter"!==_.type||(("bar"!=_.type||"bottom"!=_[d(t)+"Align"]&&"right"!=_[d(t)+"Align"])&&("bar"===_.type||"top"!=_[d(t)+"Align"]&&"left"!=_[d(t)+"Align"])||(i=-1),("bar"==_.type&&parseFloat(P(t,e,n))<m.mLength(t,n)||"bar"!==_.type&&parseFloat(P(t,e,n))>=_[p(t,!0)]-m.mLength(t,n))&&0!==a&&(o="x"==t&&"line"!==_.type?P(t,e,n):m.mLength(t,n)),o*=i),o};if(r=r||!1,0==a)i=F(t,e,n),"bar"==_.type&&(i+=P(t,e,n)/2);else switch(_[d(t)+"Align"]){case"top":i=r&&"scatter"!==_.type?F(t,e,n):P(t,e,n);break;case"right":case"bottom":i=r&&"scatter"!==_.type||"right"==_[d(t)+"Align"]&&"bar"==_.type?_[p(t)]:_[p(t)]-P(t,e,n);break;case"left":"bar"!==_.type&&(i=P(t,e,n))}i+=g()+f()}return i},F=function(t,e,n,r){var a=_[t+"Data"],i=_[d(t)+"Align"],o=0;return r=r||!1,"pie"!==_.type&&(1==_.nameIsNum||1==a?"right"==i||"bottom"==i?o=r&&0!==a&&"scatter"!==_.type?_[p(t)]:_[p(t)]-(_[p(t)]-m["the_"+_[t+"Data"]](w(e,_.key[a],!0))):"line"!=_.type&&"scatter"!=_.type||r&&0!==a&&"scatter"!==_.type||(o=m["the_"+_[t+"Data"]](w(e,_.key[a],!0))):(o=m["the_"+_[t+"Data"]](w(e,_.key[a],!1)),"line"!=_.type&&"scatter"!=_.type||_.nameIsNum||(o+=P(t,e,n)/2))),o},I=function(t){if(m.container_legend){var e=0,n="x"==t?m.container_legend.nodes()[0].getBoundingClientRect()[p(t)]:m.legend_height,r=function(){var e=0,r=1;return("pie"==_.type||"pie"!==_.type&&"left"==_[d(t)+"Align"]||"top"==_[d(t)+"Align"])&&(r=-1),"pie"==_.type&&"x"==t||"pie"!==_.type&&"left"==_[d(t)+"Align"]||"top"==_[d(t)+"Align"]?e=n+m.text_offset:"pie"==_.type&&"y"==t&&(e=.5*n),e*r};return"pie"==_.type&&"x"==t||"pie"!==_.type&&"left"==_[d(t)+"Align"]||"top"==_[d(t)+"Align"]?e=_[p(t)]:"pie"==_.type&&"y"==t&&(e=.5*_[p(t)]),e+r()}},M=function(t,n){var r=t?"area":"line",a=0==_.xData?"x":"y",i=function(){var t="curveLinear";switch(_.lineStyle){case"step":t="curveStepAfter";break;case"curve":t="curveMonotone"+a.toUpperCase()}return t}(),o=e[r](),l;if("area"==r){var s={name:a,value:d(a)+1,fill:d(a)+0},c=(l=0,_.lineFillInvert&&(l="top"==_[a+"Align"]||"left"==_[a+"Align"]?1:-1),l);o[s.name](function(t,e){return F(a,t,e,n)})[s.value](function(t,e){return F(d(a),t,e,n)})[s.fill](function(t,e){return F(d(a),t,e,!0)+c*_[p(a)]})}else o.x(function(t,e){return F("x",t,e,n)}).y(function(t,e){return F("y",t,e,n)});return i&&o.curve(e[i]),o(m.data)},E=function(t,n,r,a,i){a=a||1,r=r||"",i=i||!1;var o=(c=0,(n=n||!1)&&(c=m.pi_radius*_.piInRadius),c),l=function(){var t=0;return(!i||i&&a<=1&&0==n)&&(t=m.pi_radius*a),t}(),s=e.arc().outerRadius(l).innerRadius(o),c;return r?s[r](t):s(t)},N=function(t){var n;return e.pie().sort(null).value(function(t,e){return w(t,_.key[1],!0)})(m.data)[t]},O=function(t){var e=0;return e=_.colorLegend&&"x"==t?.375*_[p(t)]:.5*_[p(t)]},G=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},H=function(t,n,r,a){r=r||function(t,e,n){return t};var i=e[a=a||"interpolate"](t,n);return function(e){var a=i(e);return r(a,t,n)}},R=function(t){var n;switch(t){case"color":n=e.scaleOrdinal().range(m["range_"+t]);break;case"area":case 0:case 1:n=1==_.nameIsNum||1==t||"area"==t?1==_.nameIsNum&&0==t&&"scatter"==_.type?e.scaleSymlog().constant(10).range(m["range_"+t]):e.scaleLinear().range(m["range_"+t]):"line"==_.type||"scatter"==_.type?e.scalePoint().range(m["range_"+t]):e.scaleBand().range(m["range_"+t]).paddingInner(.1).paddingOuter(.1)}return n},W=function(t,e,n){if(_[t+"Ticks"]){n=n||!1;var r=_[t+"Align"],a=(n?"grid_":"rule_")+t;_[t+"Label"]&&!n&&(m["lab_"+t]=m.container_lab.append("text").attr("class",s+"label-"+t).attr("y",function(){return S("y",t)}).attr("x",function(){return S("x",t)}).attr("font-size","1em").attr("text-anchor","middle").attr("opacity",0).text(_[t+"Label"]),"y"==t&&m["lab_"+t].attr("transform","rotate(-90)"),m["lab_"+t].transition(m.duration).attr("opacity",1)),m[a]=e.append("g").attr("class",function(){var e=null;return e=n?s+"grid-"+t+" grid-increment-"+_[t+"GridIncrement"]:s+"axis-"+t+" "+s+"axis-align-"+r});var i="";switch(t+" "+r){case"x bottom":i="0,"+_.height;break;case"y right":i=_.width+",0";break;default:i="0,0"}m[a].attr("transform","translate("+i+")")}},B=function(t,n){n=n||!1;var r="Axis "+_[t+"Align"],a=e[r.toCamelCase()](m["the_"+_[t+"Data"]]);if(_[t+"Ticks"]){if("scatter"==_.type&&0==_[t+"Data"]&&1==_.nameIsNum){var i=function(){var t=[],e=L(0,m.data)[0];do{t.push(e),e*=10}while(e<=L(1,m.data)[1]);return t};a.tickValues(i())}if(_[t+"TicksAmount"]){var o=function(){return n&&_[t+"TicksAmount"]?_[t+"TicksAmount"]*_[t+"GridIncrement"]:_[t+"TicksAmount"]};a.ticks(o())}n?a.tickSize(-_[p(t,!0)]).tickFormat(""):a.tickFormat(function(e,n){return m["format_"+_[t+"Data"]](e)})}return a},U=function(t,n){throw e.select(r).classed(s+"initialized",!0),e.select(r).append("div").attr("class",s+"wrapper fatality").html(n||u),new Error(t)},q=function(t){m.data=t,console.log(r,"-------------------------------------------------------------------","\n","calculated shit",m,"\n","data",m.data,"\n","args",_,"\n"),l.forEach(function(t){m["dom_"+t]=L(t,m.data),m["the_"+t]&&m["dom_"+t]&&m["the_"+t].domain(m["dom_"+t])}),"pie"!==_.type&&i.forEach(function(t){_[t+"Ticks"]&&(m["rule_"+t+"_axis"]=B(t),m["rule_"+t].transition().duration(_.duration).call(m["rule_"+t+"_axis"]).attr("font-family",null).attr("font-size",null),_[t+"Grid"]&&(m["grid_"+t+"_axis"]=B(t,!0),m["grid_"+t].transition().duration(_.duration).call(m["grid_"+t+"_axis"]),m["grid_"+t].selectAll("g").classed("grid",!0).filter(function(e,n){console.log(m["rule_"+t+"_axis"].ticks());var r=!1;return m["rule_"+t].selectAll("g").each(function(t){t==e&&(r=!0)}),r}).classed("tick-aligned",!0)))}),("line"!=_.type||_.linePoints)&&(m.blob=m.container_graph.selectAll(m.graph_item_element+"."+s+"graph-item.graph-item-blob").data(m.data,function(t){return console.log(w(t,_.key[0])),w(t,_.key[0])}),m.blob.exit().transition(m.duration).attr("fill","red").remove(),("pie"===_.type||_.xTicks&&_.yTicks)&&("pie"!=_.type||!_.piLabelStyle&&_.colorLegend)||(m.blob_text=m.container_graph.selectAll("text."+s+"graph-item.graph-item-text").data(m.data,function(t){return w(t,_.key[0])}),m.blob_text.exit().transition(m.duration).attr("fill","red").remove(),"pie"==_.type&&"linked"==_.piLabelStyle&&(m.blob_text_link=m.container_graph.selectAll("polyline."+s+"graph-item.graph-item-link").data(m.data,function(t){return w(t,_.key[0])}),m.blob_text_link.exit().transition(m.duration).attr("fill","red").remove()))),"pie"!==_.type&&"line"==_.type&&(m.container_graph.select("."+s+"line").remove(),_.lineFill&&(m.container_graph.select("."+s+"fill").remove(),m.fill=m.container_graph.append("path").attr("class",s+"fill"+(null!==_.lineFillColor||null!==_.lineColor?" has-color":" no-color")).attr("fill-opacity",_.lineFillOpacity),m.fill.transition(m.duration).attrTween("d",function(){return H(M(!0,!0),M(!0,!1))}),(_.lineFillColor||_.lineColor)&&m.fill.attr("fill",_.lineFillColor||_.lineColor)),m.line=m.container_graph.append("path").attr("class",s+"line"+(null!==_.lineColor?" has-color":" no-color")).attr("fill","none").attr("stroke-width",_.lineWeight).attr("stroke-linejoin","round").attr("stroke-dasharray",_.lineDash).attr("stroke-opacity",1).attr("stroke-dasharray","0,0").transition(m.duration).attrTween("d",function(){return H(M(!1,!0),M(!1,!1))}),_.lineColor&&m.line.attr("stroke",_.lineColor)),("line"!=_.type||_.linePoints)&&(m.enter_blob=m.blob.enter().append(m.graph_item_element).attr("class",function(t){return s+"graph-item graph-item-blob data-name-"+w(t,_.key[0])}),m.merge_blob=m.blob.merge(m.enter_blob),"pie"!==_.type&&m.merge_blob.transition(m.duration).attrTween("line"==_.type||"scatter"==_.type?"cx":"x",function(t,e){return H(F("x",t,e,!0),F("x",t,e,!1))}).attrTween("line"==_.type||"scatter"==_.type?"cy":"y",function(t,e){return H(F("y",t,e,!0),F("y",t,e,!1))}),"pie"==_.type&&m.merge_blob.transition(m.duration).attrTween("d",function(t,e){var n=N(e);return H(n.endAngle,n.startAngle,function(t){return n.startAngle=t,E(n,!0)})}),"line"==_.type||"scatter"==_.type?m.merge_blob.transition(m.duration).attrTween("r",function(t,e){return H(T(t,e,!0),T(t,e,!1))}):m.merge_blob.transition(m.duration).attrTween("width",function(t,e){return H(P("x",t,e,!0),P("x",t,e,!1))}).attrTween("height",function(t,e){return H(P("y",t,e,!0),P("y",t,e,!1))}),_.colorPalette.length?(m.merge_blob.attr("fill",function(t,e){return m.the_color(w(t,_.key.color))}),"scatter"==_.type&&m.merge_blob.attr("fill-opacity",_.areaOpacity).attr("stroke-width",1).attr("stroke",function(t,e){return m.the_color(w(t,_.key.color))})):"line"==_.type&&(_.linePointsColor||_.lineColor)&&m.merge_blob.attr("fill",function(){return _.linePointsColor||_.lineColor})),m.blob_text&&(m.blob_text_link&&(m.enter_blob_text_link=m.blob_text_link.enter().append("polyline").attr("class",function(t){return s+"graph-item graph-item-link data-name-"+w(t,_.key[0])}),m.merge_blob_text_link=m.blob_text_link.merge(m.enter_blob_text_link).transition(m.duration).attrTween("stroke-opacity",function(t,e){return H(0,.75)}).attrTween("points",function(t,e){var n=[E(N(e),!0,"centroid",1,!1),E(N(e),!0,"centroid",1,!1)],r=[E(N(e),!0,"centroid",1,!1),E(N(e),!1,"centroid",2.25,!1)];return H(n,r)})),m.enter_blob_text=m.blob_text.enter().append("text"),"pie"==_.type&&"within"==_.piLabelStyle&&_.colorPalette.length>0&&m.enter_blob_text.attr("stroke",function(t){return m.the_color(w(t,_.key.color))}),[0,1].forEach(function(t){("pie"!==_.type&&!_[v(t)+"Ticks"]||"pie"==_.type&&(0==t&&!_.colorLegend||1==t&&null!==_.piLabelStyle))&&(m["blob_text_"+t]=m.enter_blob_text.append("tspan").attr("class",function(e){return"graph-item-text-data-"+t+" data-name-"+w(e,_.key[0])}).attr("dominant-baseline","middle").attr("text-anchor",function(t,e){return C(t,e)}).attr("font-size",function(){var e=null;return("pie"!==_.type&&!_[d(v(t))+"Ticks"]||"pie"==_.type&&!_.colorLegend&&null!==_.piLabelStyle)&&(e=0==t?".75em":"1.75em"),e}).attr("font-weight",function(){var e=700;return("pie"!==_.type&&!_[d(v(t))+"Ticks"]||"pie"==_.type&&!_.colorLegend&&null!==_.piLabelStyle)&&0!==t&&(e=300),e}).text(function(e,n){return m["format_"+t](w(e,_.key[t]))}),m["blob_text_"+t].attr("x",D("x",t)).attr("y",D("y",t)))}),m.mLength=function(t,e){var n=0;return length=m.enter_blob_text?m.enter_blob_text.nodes()[e].getBoundingClientRect()[p(t)]:0,n=length+m.text_offset},m.merge_blob_text=m.blob_text.merge(m.enter_blob_text).attr("class",function(t,e){var n=s+"graph-item graph-item-text";return[0,1].forEach(function(r){("bar"==_.type&&1==r&&(parseFloat(P(v(r),t,e,!1))<m.mLength(v(r),e)||_.colorPalette.length>0&&parseFloat(P(v(r),t,e,!1))>=m.mLength(v(r),e)&&!f(m.the_color(w(t,_.key.color))))||"line"==_.type||"scatter"==_.type||"pie"==_.type&&("within"==_.piLabelStyle&&_.colorPalette.length>0&&!f(m.the_color(w(t,_.key.color)))||"linked"==_.piLabelStyle))&&(n+=" dark")}),n}).transition(m.duration).attrTween("transform",function(t,e){var n="pie"==_.type?N(e):t;return H("translate("+z("x",n,e,!0)+","+z("y",n,e,!0)+")","translate("+z("x",n,e,!1)+","+z("y",n,e,!1)+")")}).styleTween("opacity",function(){return H(0,1)})),_.colorLegend&&(m.legend_height=0,m.container_legend&&m.container_legend.remove(),m.container_legend=m.container.append("g").attr("class",s+"legend").attr("font-size",".75em"),m.dom_color.forEach(function(t,e){m.legend=m.container_legend.append("g").attr("class",s+"legend-item"),m.legend.append("rect").attr("class","legend-item-blob").attr("width",.66*m.legend_size).attr("height",.66*m.legend_size).attr("fill",m.the_color(t)),m.legend.append("text").attr("class","legend-item-text").text(t).attr("dominant-baseline","middle").attr("x",m.legend_size).attr("y",.375*m.legend_size),m.legend.attr("transform","translate(0, "+e*m.legend_size+")"),m.legend_height+=m.legend_size}),m.container_legend.attr("transform","translate("+I("x")+","+I("y")+")").transition(m.duration).styleTween("opacity",function(){return H(0,1)})),n.graphs[r]={data:m.data,_:m}},J=function(n){switch(e.select(r).classed(s+"initialized",!0),m.data=null,_.type){case"bar":m.graph_item_element="rect";break;case"pie":m.graph_item_element="path";break;case"line":case"scatter":m.graph_item_element="circle"}if(m.text_offset=parseFloat(_.fontSize),m.data=_.srcKey?w(n,_.srcKey)?w(n,_.srcKey):void U(r+" provided source key is invalid"):n,m.data=m.data.filter(function(t,e){var n=!0;if(l.forEach(function(a){_.key[a]&&null==w(t,_.key[a])&&(n=!1,console.info(r+" datum index `"+e+"` was filtered.\ndatum does not have data for the key `"+_.key[a]+"`, which is set as data for `"+a+"`"))}),n)return t}),m.data.length>0){if(1==_.nameIsNum){for(var i=[],o=0;o<m.data.length;o++)m.data[o]&&i.push(m.data[o]);i.sort(function(t,e){return w(t,_.key[0],!0)-w(e,_.key[0],!0)}),m.data=i}a.key.color||(a.key.color=_.key[0],a.colorLegend||(_.colorLegend=!1)),m.legend_size=30,m.margin={top:_.margin[0]||_.margin,left:_.margin[3]||_.margin[1]||_.margin[0]||_.margin,bottom:_.margin[2]||_.margin[0]||_.margin,right:_.margin[1]||_.margin[0]||_.margin},m.outerWidth=_.width+m.margin.left+m.margin.right,m.outerHeight=_.height+m.margin.top+m.margin.bottom,e.select(r).append("div",":first-child").attr("class",s+"heading"),m.heading_sel=e.select(r).select("div."+s+"heading"),_.title&&(m.heading_title=m.heading_sel.append("span").attr("class",s+"title").text(_.title)),_.description&&(m.heading_description=m.heading_sel.append("span").attr("class",s+"description").text(_.description)),m.heading_sel.style("padding-top",function(){return m.margin.top/_.height*50+"%"}).style("padding-left",function(){return m.margin.left/_.width*100+"%"}).style("padding-right",function(){return m.margin.right/_.width*100+"%"}).transition(m.duration).styleTween("opacity",function(){return H(0,1)}),m.canvas=e.select(r).append("div").attr("class",s+"wrapper").style("position","relative").style("padding-bottom",function(){return m.outerHeight/m.outerWidth*100+"%"}).style("position","relative");var c="0 0 "+m.outerWidth+" "+m.outerHeight;m.dv_init=!1,document.addEventListener("scroll",function(n){var a;h.getBoundingClientRect().top<.5*t.innerHeight&&!m.dv_init&&(m.dv_init=!0,setTimeout(function(){var n;m.svg=m.canvas.append("svg").attr("id",r+"-svg").style("position","absolute").style("top","0").style("left","0").style("bottom","0").style("right","0").style("margin","auto").attr("version","1.1").attr("x","0px").attr("y","0px").attr("class",s+"svg "+s+"type-"+_.type+" "+s+(_.colorPalette.length>0||null!==_.linePointsColor||null!==_.lineColor?"has":"no")+"-palette "+s+("pie"===_.type||_.xTicks||_.yTicks?"has":"no")+"-ticks "+s+(_.colorLegend?"has":"no")+"-legend"+("pie"==_.type&&null!==_.piLabelStyle?" "+s+"pi-label-style-"+_.piLabelStyle:" "+s+"no-label")).attr("viewBox",c).attr("preserveAspectRatio","xMidYMid meet").attr("xml:space","preserve").attr("width",m.outerWidth).attr("height",m.outerHeight),m.duration=m.svg.transition().duration(_.transition).ease(e.easeLinear),m.container=m.svg.append("g").attr("class",s+"svg-wrapper").attr("font-size",_.fontSize).style("line-height",1).attr("transform","translate("+m.margin.left+","+m.margin.top+")"),"pie"==_.type?m.pi_radius=(n=Math.min(.5*_.width,.5*_.height),_.colorLegend&&(n-=.25*n),"linked"==_.piLabelStyle&&(n-=.25*n),n):(m.container_lab=m.container.append("g").attr("class",s+"label"),m.container_rule=m.container.append("g").attr("class",s+"axis").attr("font-size",".75em"),(_.xGrid||_.yGrid)&&(m.container_grid=m.container.append("g").attr("class",s+"grid").attr("font-size",".75em"))),m.container_graph=m.container.insert("g").attr("class",s+"graph"),_.width==b.width&&_.height==b.height&&m.data.length>9?console.warn(r+" Width and height was not adjusted. graph elements may not fit in the canvas"):_.width<b.width&&_.height<b.height&&console.warn(r+" set canvas width and or height may be too small.\n Tip: The given height and width are not absolute and act more like aspect ratios. svgs are responsive and will shrink along with content."),"pie"==_.type&&m.container_graph.attr("transform","translate("+O("x")+","+O("y")+")"),l.forEach(function(t){switch(m["range_"+t]=A(t),m["the_"+t]=R(t),m["format_"+t]="function"==typeof _["format"+t+"Parameter"]?_["format"+t+"Parameter"]:"string"==typeof _["format"+t+"Parameter"]?function(n){return e.format(_["format"+t+"Parameter"])(n)}:function(e){var n=_["format"+t.toString().toUpperCase()+"Divider"],r=_["format"+t.toString().toUpperCase()+"Prepend"],a=_["format"+t.toString().toUpperCase()+"Append"],i,o;return r+(1==t||1==_.nameIsNum?e/n:e)+a},t){case 0:case 1:W(v(t),m.container_rule),_[v(t)+"Grid"]&&W(v(t),m.container_grid,!0);case"color":if(_.colorPalette.length)break}}),console,q(m.data),t.addEventListener("resize",function(){q(m.data)})},_.delay))},!0)}else U("Data was filtered and all items are invalid for visualizing. check provided data keys and make sure they are correct")};if(_.srcPath.indexOf(t.location.href)>-1){var K=document.getElementById(_.srcPath.getHash()).innerHTML,V;if(K.isValidJSONString())J(JSON.parse(K));else U("Data input may not be valid. Please check and _ the syntax")}else switch(_.srcPath.getFileExtension()){case"csv":case"dsv":case"tsv":case"xml":e[_.srcPath.getFileExtension()](_.srcPath,function(t){return t}).then(J).catch(function(t){U(t,"Data source couldn't be requested. Please check console for more details")});break;default:e.json(_.srcPath,function(t){return t}).then(J).catch(function(t){U(t,"Data source couldn't be requested. Please check console for more details")})}},t._1p21=n}(window,d3);